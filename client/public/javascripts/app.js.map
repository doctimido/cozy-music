{"version":3,"file":"public/javascripts/app.js","sources":["app/application.coffee","app/collections/playlist.coffee","app/collections/playlist_collection.coffee","app/collections/playqueue.coffee","app/collections/track_collection.coffee","app/initialize.coffee","app/lib/app_helpers.coffee","app/lib/base_view.coffee","app/lib/view_collection.coffee","app/models/playlist.coffee","app/models/track.coffee","app/models/uploader.coffee","app/router.coffee","app/views/app_view.coffee","app/views/lists/playlist.coffee","app/views/lists/playlist_item.coffee","app/views/lists/playqueue.coffee","app/views/lists/playqueue_item.coffee","app/views/lists/tracklist.coffee","app/views/lists/tracklist_item.coffee","app/views/lists/tracks.coffee","app/views/lists/tracks_item.coffee","app/views/off_screen_nav.coffee","app/views/player/player.coffee","app/views/player/volumeManager.coffee","app/views/playlist_nav_view.coffee","app/views/templates/home.jade","app/views/templates/off_screen_nav.jade","app/views/templates/player/player.jade","app/views/templates/player/volumeManager.jade","app/views/templates/playlist.jade","app/views/templates/playlist_item.jade","app/views/templates/playlist_nav.jade","app/views/templates/playqueue.jade","app/views/templates/playqueue_item.jade","app/views/templates/top_nav.jade","app/views/templates/tracklist.jade","app/views/templates/tracklist_item.jade","app/views/templates/tracks.jade","app/views/templates/tracks_item.jade","app/views/top_nav.coffee"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApHA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7MA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3HA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzDA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5LA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9DA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtNA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5DA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3EA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1LA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7EA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxUA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxZA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9JA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvcA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArIA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApLA;;A","sourcesContent":["module.exports = {\n  initialize: function() {\n    var PlayQueue, Router, TrackCollection,\n      _this = this;\n    Router = require('router');\n    this.router = new Router();\n    TrackCollection = require('collections/track_collection');\n    this.tracks = new TrackCollection();\n    this.tracks.fetch({\n      error: function() {\n        var msg;\n        msg = \"Files couldn't be retrieved due to a server error.\";\n        return alert(msg);\n      }\n    });\n    PlayQueue = require('collections/playqueue');\n    this.playQueue = new PlayQueue();\n    this.selectedPlaylist = null;\n    this.isBroadcastEnabled = false;\n    $.ajax(\"broadcast\", {\n      type: 'DELETE',\n      error: function(jqXHR, textStatus, errorThrown) {\n        return console.log(\"ajax fail : \" + textStatus);\n      }\n    });\n    this.soundManager = soundManager;\n    this.soundManager.setup({\n      debugMode: false,\n      debugFlash: false,\n      useFlashBlock: false,\n      preferFlash: true,\n      flashPollingInterval: 500,\n      html5PollingInterval: 500,\n      url: \"swf/\",\n      flashVersion: 9,\n      onready: function() {\n        return $('.player').trigger('soundManager:ready');\n      },\n      ontimeout: function() {\n        return $('.player').trigger('soundManager:timeout');\n      }\n    });\n    return Backbone.history.start();\n  }\n};\n","var PlaylistTrackCollection, Track, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nTrack = require('../models/track');\n\nmodule.exports = PlaylistTrackCollection = (function(_super) {\n  __extends(PlaylistTrackCollection, _super);\n\n  function PlaylistTrackCollection() {\n    this.add = __bind(this.add, this);\n    this.getWeight = __bind(this.getWeight, this);\n    _ref = PlaylistTrackCollection.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  PlaylistTrackCollection.prototype.model = Track;\n\n  PlaylistTrackCollection.prototype.getWeight = function(playlists) {\n    var elem, _i, _len;\n    for (_i = 0, _len = playlists.length; _i < _len; _i++) {\n      elem = playlists[_i];\n      if (elem.id === this.playlistId) {\n        return elem.weight;\n      }\n    }\n    return false;\n  };\n\n  PlaylistTrackCollection.prototype.add = function(track, superOnly, options) {\n    var last, lastWeight,\n      _this = this;\n    if (superOnly == null) {\n      superOnly = false;\n    }\n    if (superOnly) {\n      return PlaylistTrackCollection.__super__.add.call(this, track, options);\n    }\n    if (this.size() > 0) {\n      last = this.last();\n      lastWeight = this.getWeight(last.attributes.playlists);\n    } else {\n      lastWeight = 0;\n    }\n    track.sync('update', track, {\n      url: \"\" + this.url + \"/\" + track.id + \"/\" + lastWeight,\n      error: function(xhr) {\n        var msg;\n        msg = JSON.parse(xhr.responseText);\n        return alert(\"fail to add track : \" + msg.error);\n      },\n      success: function(playlists) {\n        return track.attributes.playlists = playlists;\n      }\n    });\n    return this.listenToOnce(track, 'sync', PlaylistTrackCollection.__super__.add.apply(this, arguments));\n  };\n\n  PlaylistTrackCollection.prototype.remove = function(track, superOnly) {\n    if (superOnly == null) {\n      superOnly = false;\n    }\n    if (superOnly) {\n      return PlaylistTrackCollection.__super__.remove.call(this, track);\n    }\n    track.sync('delete', track, {\n      url: \"\" + this.url + \"/\" + track.id,\n      error: function(xhr) {\n        var msg;\n        msg = JSON.parse(xhr.responseText);\n        return alert(\"fail to remove track : \" + msg.error);\n      }\n    });\n    return this.listenToOnce(track, 'sync', PlaylistTrackCollection.__super__.remove.apply(this, arguments));\n  };\n\n  PlaylistTrackCollection.prototype.move = function(newP, track) {\n    var next, nextWeight, oldP, prev, prevWeight,\n      _this = this;\n    oldP = this.indexOf(track);\n    if (newP === oldP) {\n      return;\n    }\n    if (newP === 0) {\n      prevWeight = 0;\n    } else {\n      prev = oldP < newP ? this.at(newP) : this.at(newP - 1);\n      prevWeight = this.getWeight(prev.attributes.playlists);\n    }\n    if (newP >= this.indexOf(this.last())) {\n      nextWeight = Math.pow(2, 53);\n    } else {\n      next = oldP < newP ? this.at(newP + 1) : this.at(newP);\n      nextWeight = this.getWeight(next.attributes.playlists);\n    }\n    track.sync('update', track, {\n      url: \"\" + this.url + \"/prev/\" + prevWeight + \"/next/\" + nextWeight + \"/\" + track.id,\n      error: function(xhr) {\n        var msg;\n        msg = JSON.parse(xhr.responseText);\n        return alert(\"fail to move track : \" + msg.error);\n      },\n      success: function(playlists) {\n        return track.attributes.playlists = playlists;\n      }\n    });\n    this.remove(track, true);\n    return this.add(track, true, {\n      at: newP\n    });\n  };\n\n  return PlaylistTrackCollection;\n\n})(Backbone.Collection);\n","var Playlist, PlaylistCollection, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nPlaylist = require('../models/playlist');\n\nmodule.exports = PlaylistCollection = (function(_super) {\n  __extends(PlaylistCollection, _super);\n\n  function PlaylistCollection() {\n    _ref = PlaylistCollection.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  PlaylistCollection.prototype.model = Playlist;\n\n  PlaylistCollection.prototype.url = 'playlists';\n\n  return PlaylistCollection;\n\n})(Backbone.Collection);\n","var PlayQueue, Track, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nTrack = require('../models/track');\n\nmodule.exports = PlayQueue = (function(_super) {\n  var viewHaveToBeSignaled;\n\n  __extends(PlayQueue, _super);\n\n  function PlayQueue() {\n    this.setAtPlay = __bind(this.setAtPlay, this);\n    _ref = PlayQueue.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  PlayQueue.prototype.atPlay = 0;\n\n  PlayQueue.prototype.model = Track;\n\n  PlayQueue.prototype.playLoop = 'no-repeat';\n\n  viewHaveToBeSignaled = false;\n\n  PlayQueue.prototype.setAtPlay = function(value, signalView) {\n    if (signalView == null) {\n      signalView = true;\n    }\n    this.atPlay = value;\n    if (signalView) {\n      return this.trigger('change:atPlay');\n    } else {\n      return this.viewHaveToBeSignaled = true;\n    }\n  };\n\n  PlayQueue.prototype.getCurrentTrack = function() {\n    var _ref1;\n    if ((0 <= (_ref1 = this.atPlay) && _ref1 < this.length)) {\n      return this.at(this.atPlay);\n    } else {\n      return null;\n    }\n  };\n\n  PlayQueue.prototype.getNextTrack = function() {\n    if (this.playLoop === 'repeat-one') {\n      return this.at(this.atPlay);\n    } else if (this.atPlay < this.length - 1) {\n      this.setAtPlay(this.atPlay + 1);\n      return this.at(this.atPlay);\n    } else if (this.playLoop === 'repeat-all' && this.length > 0) {\n      this.setAtPlay(0);\n      return this.at(this.atPlay);\n    } else {\n      return null;\n    }\n  };\n\n  PlayQueue.prototype.getPrevTrack = function() {\n    if (this.playLoop === 'repeat-one') {\n      return this.at(this.atPlay);\n    } else if (this.atPlay > 0) {\n      this.setAtPlay(this.atPlay - 1);\n      return this.at(this.atPlay);\n    } else if (this.playLoop === 'repeat-all' && this.length > 0) {\n      this.setAtPlay(this.length - 1);\n      return this.at(this.atPlay);\n    } else {\n      return null;\n    }\n  };\n\n  PlayQueue.prototype.queue = function(track) {\n    if (!this.get(track.id)) {\n      return this.push(track, {\n        sort: false\n      });\n    } else {\n      return this.moveItem(track, this.size() - 1);\n    }\n  };\n\n  PlayQueue.prototype.pushNext = function(track) {\n    if (!this.get(track.id)) {\n      if (this.length > 0) {\n        return this.add(track, {\n          at: this.atPlay + 1\n        });\n      } else {\n        return this.add(track);\n      }\n    } else {\n      if (this.indexOf(track) < this.atPlay) {\n        return this.moveItem(track, this.atPlay);\n      } else {\n        return this.moveItem(track, this.atPlay + 1);\n      }\n    }\n  };\n\n  PlayQueue.prototype.moveItem = function(track, position) {\n    if (this.indexOf(track) === this.atPlay) {\n      this.setAtPlay(position);\n    } else {\n      if (this.indexOf(track) < this.atPlay) {\n        this.setAtPlay(this.atPlay - 1);\n      }\n      if (position <= this.atPlay) {\n        this.setAtPlay(this.atPlay + 1);\n      }\n    }\n    this.remove(track, false);\n    return this.add(track, {\n      at: position\n    });\n  };\n\n  PlayQueue.prototype.remove = function(track, updateAtPlayValue) {\n    var id;\n    if (updateAtPlayValue == null) {\n      updateAtPlayValue = true;\n    }\n    if (updateAtPlayValue) {\n      if (this.indexOf(track) < this.atPlay) {\n        this.setAtPlay(this.atPlay - 1, false);\n      } else if (this.indexOf(track) === this.atPlay) {\n        id = track.get('id');\n        Backbone.Mediator.publish('track:delete', \"sound-\" + id);\n        if (this.indexOf(track) === this.indexOf(this.last()) && this.length > 1) {\n          this.setAtPlay(this.atPlay - 1, false);\n        }\n      }\n    }\n    PlayQueue.__super__.remove.call(this, track);\n    if (this.viewHaveToBeSignaled) {\n      this.trigger('change:atPlay');\n      return this.viewHaveToBeSignaled = false;\n    }\n  };\n\n  PlayQueue.prototype.playFromTrack = function(track) {\n    var index;\n    index = this.indexOf(track);\n    this.setAtPlay(index);\n    return Backbone.Mediator.publish('track:play-from', track);\n  };\n\n  PlayQueue.prototype.deleteFromIndexToEnd = function(index) {\n    var _results;\n    _results = [];\n    while (this.indexOf(this.last()) >= index) {\n      _results.push(this.remove(this.last()));\n    }\n    return _results;\n  };\n\n  PlayQueue.prototype.deleteFromBeginingToIndex = function(index) {\n    var count, i, _i, _results;\n    count = index < this.length ? index : this.length;\n    _results = [];\n    for (i = _i = 0; 0 <= count ? _i <= count : _i >= count; i = 0 <= count ? ++_i : --_i) {\n      _results.push(this.remove(this.first()));\n    }\n    return _results;\n  };\n\n  PlayQueue.prototype.randomize = function() {\n    var i, tmp, _i, _j, _ref1, _ref2, _ref3, _results;\n    if (this.atPlay < this.length - 1) {\n      tmp = new Backbone.Collection();\n      for (i = _i = _ref1 = this.atPlay + 1, _ref2 = this.length - 1; _ref1 <= _ref2 ? _i <= _ref2 : _i >= _ref2; i = _ref1 <= _ref2 ? ++_i : --_i) {\n        tmp.push(this.models[i]);\n      }\n      tmp.reset(tmp.shuffle());\n      while (this.indexOf(this.last()) > this.atPlay) {\n        this.remove(this.last());\n      }\n      _results = [];\n      for (i = _j = 0, _ref3 = tmp.length - 1; 0 <= _ref3 ? _j <= _ref3 : _j >= _ref3; i = 0 <= _ref3 ? ++_j : --_j) {\n        _results.push(this.push(tmp.models[i]));\n      }\n      return _results;\n    }\n  };\n\n  PlayQueue.prototype.show = function() {\n    var curM, i, _i, _ref1, _results;\n    console.log(\"atPlay : \" + this.atPlay);\n    console.log(\"PlayQueue content :\");\n    if (this.length >= 1) {\n      _results = [];\n      for (i = _i = 0, _ref1 = this.length - 1; 0 <= _ref1 ? _i <= _ref1 : _i >= _ref1; i = 0 <= _ref1 ? ++_i : --_i) {\n        curM = this.models[i];\n        _results.push(console.log(this.indexOf(curM) + \") \" + curM.attributes.title));\n      }\n      return _results;\n    }\n  };\n\n  return PlayQueue;\n\n})(Backbone.Collection);\n","var Track, TrackCollection, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nTrack = require('../models/track');\n\nmodule.exports = TrackCollection = (function(_super) {\n  __extends(TrackCollection, _super);\n\n  function TrackCollection() {\n    _ref = TrackCollection.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  TrackCollection.prototype.model = Track;\n\n  TrackCollection.prototype.url = 'tracks';\n\n  return TrackCollection;\n\n})(Backbone.Collection);\n","var app;\n\napp = require('application');\n\n$(function() {\n  require('lib/app_helpers');\n  return app.initialize();\n});\n","(function() {\n  return (function() {\n    var console, dummy, method, methods, _results;\n    console = window.console = window.console || {};\n    method = void 0;\n    dummy = function() {};\n    methods = 'assert,count,debug,dir,dirxml,error,exception,\\\n                   group,groupCollapsed,groupEnd,info,log,markTimeline,\\\n                   profile,profileEnd,time,timeEnd,trace,warn'.split(',');\n    _results = [];\n    while (method = methods.pop()) {\n      _results.push(console[method] = console[method] || dummy);\n    }\n    return _results;\n  })();\n})();\n","var BaseView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BaseView = (function(_super) {\n  __extends(BaseView, _super);\n\n  function BaseView() {\n    _ref = BaseView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BaseView.prototype.template = function() {};\n\n  BaseView.prototype.initialize = function() {};\n\n  BaseView.prototype.getRenderData = function() {\n    var _ref1;\n    return {\n      model: (_ref1 = this.model) != null ? _ref1.toJSON() : void 0\n    };\n  };\n\n  BaseView.prototype.render = function() {\n    this.beforeRender();\n    this.$el.html(this.template(this.getRenderData()));\n    this.afterRender();\n    return this;\n  };\n\n  BaseView.prototype.beforeRender = function() {};\n\n  BaseView.prototype.afterRender = function() {};\n\n  BaseView.prototype.destroy = function() {\n    this.undelegateEvents();\n    this.$el.removeData().unbind();\n    this.remove();\n    return Backbone.View.prototype.remove.call(this);\n  };\n\n  return BaseView;\n\n})(Backbone.View);\n","var BaseView, ViewCollection, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('lib/base_view');\n\nmodule.exports = ViewCollection = (function(_super) {\n  __extends(ViewCollection, _super);\n\n  function ViewCollection() {\n    this.removeItem = __bind(this.removeItem, this);\n    this.addItem = __bind(this.addItem, this);\n    _ref = ViewCollection.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  ViewCollection.prototype.itemview = null;\n\n  ViewCollection.prototype.views = {};\n\n  ViewCollection.prototype.template = function() {\n    return '';\n  };\n\n  ViewCollection.prototype.collectionEl = null;\n\n  ViewCollection.prototype.onChange = function() {\n    return this.$el.toggleClass('empty', _.size(this.views) === 0);\n  };\n\n  ViewCollection.prototype.appendView = function(view) {\n    var className, index, selector, tagName;\n    index = this.collection.indexOf(view.model);\n    if (index === 0) {\n      return this.$collectionEl.prepend(view.$el);\n    } else {\n      if (view.className != null) {\n        className = \".\" + view.className;\n      } else {\n        className = \"\";\n      }\n      if (view.tagName != null) {\n        tagName = view.tagName;\n      } else {\n        tagName = \"\";\n      }\n      selector = \"\" + tagName + className + \":nth-of-type(\" + index + \")\";\n      return this.$collectionEl.find(selector).after(view.$el);\n    }\n  };\n\n  ViewCollection.prototype.initialize = function() {\n    var collectionEl;\n    ViewCollection.__super__.initialize.apply(this, arguments);\n    this.views = {};\n    this.listenTo(this.collection, \"reset\", this.onReset);\n    this.listenTo(this.collection, \"add\", this.addItem);\n    this.listenTo(this.collection, \"remove\", this.removeItem);\n    this.on(\"change\", this.onChange);\n    if (this.collectionEl == null) {\n      return collectionEl = el;\n    }\n  };\n\n  ViewCollection.prototype.render = function() {\n    var id, view, _ref1;\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      view.$el.detach();\n    }\n    return ViewCollection.__super__.render.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.afterRender = function() {\n    var id, view, _ref1;\n    ViewCollection.__super__.afterRender.apply(this, arguments);\n    this.$collectionEl = $(this.collectionEl);\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      this.appendView(view.$el);\n    }\n    this.onReset(this.collection);\n    return this.trigger('change');\n  };\n\n  ViewCollection.prototype.remove = function() {\n    this.onReset([]);\n    return ViewCollection.__super__.remove.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.onReset = function(newcollection) {\n    var id, view, _ref1;\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      view.remove();\n    }\n    return newcollection.forEach(this.addItem);\n  };\n\n  ViewCollection.prototype.addItem = function(model) {\n    var options, view;\n    options = _.extend({}, {\n      model: model\n    });\n    view = new this.itemview(options);\n    this.views[model.cid] = view.render();\n    this.appendView(view);\n    return this.trigger('change');\n  };\n\n  ViewCollection.prototype.removeItem = function(model) {\n    this.views[model.cid].remove();\n    delete this.views[model.cid];\n    return this.trigger('change');\n  };\n\n  return ViewCollection;\n\n})(BaseView);\n","var Playlist, PlaylistTrackCollection, app, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nPlaylistTrackCollection = require('../collections/playlist');\n\napp = require('application');\n\nmodule.exports = Playlist = (function(_super) {\n  __extends(Playlist, _super);\n\n  function Playlist() {\n    _ref = Playlist.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  Playlist.prototype.urlRoot = \"playlists\";\n\n  Playlist.prototype.initialize = function() {\n    var _this = this;\n    Playlist.__super__.initialize.apply(this, arguments);\n    this.listenTo(this, 'change:id', function(e) {\n      _this.tracks.playlistId = \"\" + _this.id;\n      return _this.tracks.url = \"playlists/\" + _this.id;\n    });\n    this.tracks = new PlaylistTrackCollection(false, {\n      url: \"playlists/\" + this.id\n    });\n    this.tracks.playlistId = \"\" + this.id;\n    if (this.id != null) {\n      return this.tracks.fetch();\n    } else {\n      return this.listenToOnce(this, 'sync', function(e) {\n        return _this.tracks.fetch();\n      });\n    }\n  };\n\n  Playlist.prototype.destroy = function() {\n    var curUrl, regex, str, track;\n    curUrl = \"\" + document.URL;\n    str = \"#playlist/\" + this.id;\n    regex = new RegExp(str);\n    if (curUrl.match(regex)) {\n      app.router.navigate('', true);\n    }\n    while (this.tracks.length !== 0) {\n      track = this.tracks.first();\n      this.tracks.remove(track);\n    }\n    Playlist.__super__.destroy.apply(this, arguments);\n    return false;\n  };\n\n  return Playlist;\n\n})(Backbone.Model);\n","var Track, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = Track = (function(_super) {\n  __extends(Track, _super);\n\n  function Track() {\n    _ref = Track.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  Track.prototype.urlRoot = 'tracks';\n\n  Track.prototype.defaults = function() {\n    return {\n      state: 'server'\n    };\n  };\n\n  Track.prototype.sync = function(method, model, options) {\n    var progress;\n    progress = function(e) {\n      return model.trigger('progress', e);\n    };\n    _.extend(options, {\n      xhr: function() {\n        var xhr;\n        xhr = $.ajaxSettings.xhr();\n        if (xhr instanceof window.XMLHttpRequest) {\n          xhr.addEventListener('progress', progress, false);\n        }\n        if (xhr.upload) {\n          xhr.upload.addEventListener('progress', progress, false);\n        }\n        return xhr;\n      }\n    });\n    return Backbone.sync.apply(this, arguments);\n  };\n\n  return Track;\n\n})(Backbone.Model);\n","var Track, Uploader, app, controlFile, readMetaData, refreshDisplay, upload, uploadWorker,\n  _this = this;\n\napp = require('application');\n\nTrack = require('models/track');\n\ncontrolFile = function(track, cb) {\n  var err;\n  if (!track.file.type.match(/audio\\/(mp3|mpeg)/)) {\n    err = \"unsupported \" + track.file.type + \" filetype\";\n  }\n  return cb(err);\n};\n\nreadMetaData = function(track, cb) {\n  var reader, url;\n  url = track.get('title');\n  reader = new FileReader();\n  reader.onload = function(event) {\n    return ID3.loadTags(url, (function() {\n      var tags, _ref;\n      tags = ID3.getAllTags(url);\n      track.set({\n        title: tags.title != null ? tags.title : url,\n        artist: tags.artist != null ? tags.artist : '',\n        album: tags.album != null ? tags.album : '',\n        track: tags.track != null ? tags.track : '',\n        year: tags.year != null ? tags.year : '',\n        genre: tags.genre != null ? tags.genre : '',\n        time: ((_ref = tags.TLEN) != null ? _ref.data : void 0) != null ? tags.TLEN.data : ''\n      });\n      return cb();\n    }), {\n      tags: [\"title\", \"artist\", \"album\", \"track\", \"year\", \"genre\", \"TLEN\"],\n      dataReader: FileAPIReader(track.file)\n    });\n  };\n  reader.readAsArrayBuffer(track.file);\n  return reader.onabort = function(event) {\n    return cb(\"unable to read metadata\");\n  };\n};\n\nupload = function(track, cb) {\n  var formdata;\n  formdata = new FormData();\n  formdata.append('cid', track.cid);\n  formdata.append('title', track.get('title'));\n  formdata.append('artist', track.get('artist'));\n  formdata.append('album', track.get('album'));\n  formdata.append('track', track.get('track'));\n  formdata.append('year', track.get('year'));\n  formdata.append('genre', track.get('genre'));\n  formdata.append('time', track.get('time'));\n  formdata.append('file', track.file);\n  if (track.attributes.state === 'canceled') {\n    return cb(\"upload canceled\");\n  }\n  track.set({\n    state: 'uploadStart'\n  });\n  track.sync('create', track, {\n    processData: false,\n    contentType: false,\n    data: formdata,\n    success: function(model) {\n      track.set(model);\n      return cb();\n    },\n    error: function() {\n      return cb(\"upload failed\");\n    }\n  });\n  return false;\n};\n\nrefreshDisplay = function(track, cb) {\n  track.set({\n    state: 'uploadEnd'\n  });\n  return cb();\n};\n\nuploadWorker = function(track, done) {\n  return async.waterfall([\n    function(cb) {\n      return controlFile(track, cb);\n    }, function(cb) {\n      return readMetaData(track, cb);\n    }, function(cb) {\n      return upload(track, cb);\n    }, function(cb) {\n      return refreshDisplay(track, cb);\n    }\n  ], function(err) {\n    if (err) {\n      return done(\"\" + (track.get('title')) + \" not uploaded properly : \" + err, track);\n    } else {\n      return done();\n    }\n  });\n};\n\nUploader = (function() {\n  function Uploader() {}\n\n  Uploader.prototype.uploadQueue = async.queue(uploadWorker, 3);\n\n  Uploader.prototype.process = function(files) {\n    var file, fileAttributes, track, _i, _len, _results,\n      _this = this;\n    Backbone.Mediator.publish('uploader:addTracks');\n    _results = [];\n    for (_i = 0, _len = files.length; _i < _len; _i++) {\n      file = files[_i];\n      fileAttributes = {};\n      fileAttributes = {\n        title: file.name,\n        artist: \"\",\n        album: \"\"\n      };\n      track = new Track(fileAttributes);\n      track.file = file;\n      app.tracks.unshift(track, {\n        sort: false\n      });\n      track.set({\n        state: 'client'\n      });\n      Backbone.Mediator.publish('uploader:addTrack');\n      _results.push(this.uploadQueue.push(track, function(err, track) {\n        if (err) {\n          console.log(err);\n          return app.tracks.remove(track);\n        }\n      }));\n    }\n    return _results;\n  };\n\n  Uploader.prototype.processYoutube = function(youId) {\n    var fileAttributes, track,\n      _this = this;\n    fileAttributes = {};\n    fileAttributes = {\n      title: \"fetching youtube-mp3.org ...\",\n      artist: \"\",\n      album: \"\"\n    };\n    track = new Track(fileAttributes);\n    app.tracks.unshift(track, {\n      sort: false\n    });\n    track.set({\n      state: 'importBegin'\n    });\n    Backbone.Mediator.publish('uploader:addTrack');\n    return Backbone.ajax({\n      dataType: \"json\",\n      url: \"you/\" + youId,\n      context: this,\n      data: \"\",\n      success: function(model) {\n        track.set(model);\n        return track.set({\n          state: 'uploadEnd'\n        });\n      },\n      error: function(xhr, status, error) {\n        var beg, end;\n        app.tracks.remove(track);\n        beg = \"Youtube import \" + status;\n        end = \"Import was cancelled.\";\n        if (xhr.responseText !== \"\") {\n          return alert(\"\" + beg + \" : \" + xhr.responseText + \". \" + end);\n        } else {\n          return alert(\"\" + beg + \". \" + end);\n        }\n      }\n    });\n  };\n\n  return Uploader;\n\n})();\n\nmodule.exports = new Uploader();\n","var AppView, Router, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nAppView = require('views/app_view');\n\nmodule.exports = Router = (function(_super) {\n  __extends(Router, _super);\n\n  function Router() {\n    this.onVKey = __bind(this.onVKey, this);\n    _ref = Router.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  Router.prototype.routes = {\n    '': 'main',\n    'playqueue': 'playqueue',\n    'playlist/:playlistId': 'playlist'\n  };\n\n  Router.prototype.initialize = function() {\n    this.mainView = new AppView();\n    this.mainView.render();\n    this.lastSeen = null;\n    this.atHome = false;\n    return Mousetrap.bind('v', this.onVKey);\n  };\n\n  Router.prototype.onVKey = function() {\n    if (this.atHome) {\n      if (this.lastSeen != null) {\n        return this.navigate(\"playlist/\" + this.lastSeen, true);\n      } else {\n        return this.navigate(\"playqueue\", true);\n      }\n    } else {\n      return this.navigate(\"\", true);\n    }\n  };\n\n  Router.prototype.main = function() {\n    this.atHome = true;\n    return this.mainView.showTrackList();\n  };\n\n  Router.prototype.playlist = function(id) {\n    this.atHome = false;\n    this.lastSeen = id;\n    return this.mainView.showPlayList(id);\n  };\n\n  Router.prototype.playqueue = function() {\n    this.atHome = false;\n    this.lastSeen = null;\n    return this.mainView.showPlayQueue();\n  };\n\n  return Router;\n\n})(Backbone.Router);\n","var AppView, BaseView, OffScreenNav, PlayQueue, Player, Playlist, PlaylistCollection, TopNav, Tracks, app, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('lib/base_view');\n\nTopNav = require('views/top_nav');\n\nTracks = require('views/lists/tracks');\n\nPlayQueue = require('views/lists/playqueue');\n\nPlaylist = require('views/lists/playlist');\n\nPlayer = require('views/player/player');\n\nOffScreenNav = require('views/off_screen_nav');\n\napp = require('application');\n\nPlaylistCollection = require('collections/playlist_collection');\n\nmodule.exports = AppView = (function(_super) {\n  __extends(AppView, _super);\n\n  function AppView() {\n    this.showPlayList = __bind(this.showPlayList, this);\n    this.showPlayQueue = __bind(this.showPlayQueue, this);\n    this.showTrackList = __bind(this.showTrackList, this);\n    _ref = AppView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  AppView.prototype.el = 'body.application';\n\n  AppView.prototype.template = require('views/templates/home');\n\n  AppView.prototype.events = {\n    'drop #content': function(e) {\n      var _ref1;\n      if (((_ref1 = e.originalEvent) != null ? _ref1.dataTransfer : void 0) == null) {\n        return;\n      }\n      return this.topNav.onFilesDropped(e);\n    },\n    'dragover': function(e) {\n      return this.topNav.onDragOver(e);\n    },\n    'mouseover': function(e) {\n      return this.topNav.onDragOut(e);\n    }\n  };\n\n  AppView.prototype.initialize = function() {\n    AppView.__super__.initialize.apply(this, arguments);\n    Cookies.defaults = {\n      expires: 604800\n    };\n    this.playList = {};\n    return this.currentPlaylistId = 0;\n  };\n\n  AppView.prototype.afterRender = function() {\n    var _this = this;\n    AppView.__super__.afterRender.apply(this, arguments);\n    this.topNav = new TopNav;\n    this.$('#top-nav').append(this.topNav.$el);\n    this.topNav.render();\n    this.player = new Player();\n    this.$('#player').append(this.player.$el);\n    this.player.render();\n    this.playlistCollection = new PlaylistCollection();\n    this.playlistCollection.fetch({\n      success: function(collection) {\n        _this.offScreenNav = new OffScreenNav({\n          collection: collection\n        });\n        _this.$('#off-screen-nav').append(_this.offScreenNav.$el);\n        return _this.offScreenNav.render();\n      },\n      error: function() {\n        var msg;\n        msg = \"Playlists couldn't be retrieved due to a server error.\";\n        return alert(msg);\n      }\n    });\n    return window.onbeforeunload = function() {\n      var msg;\n      msg = \"\";\n      app.tracks.each(function(track) {\n        var state;\n        state = track.attributes.state;\n        if (msg === \"\" && state !== 'server') {\n          return msg += \"upload will be cancelled \";\n        }\n      });\n      if (!_this.player.isStopped && !_this.player.isPaused) {\n        msg += \"music will be stopped\";\n      }\n      if (msg !== \"\" && app.playQueue.length > 0) {\n        msg += \" & your queue list will be erased.\";\n      }\n      if (msg !== \"\") {\n        return msg;\n      } else {\n\n      }\n    };\n  };\n\n  AppView.prototype.showTrackList = function() {\n    var _ref1;\n    if (this.queueList != null) {\n      this.queueList.beforeDetach();\n      this.queueList.$el.detach();\n    }\n    if (this.playList[this.currentPlaylistId] != null) {\n      this.playList[this.currentPlaylistId].beforeDetach();\n      this.playList[this.currentPlaylistId].$el.detach();\n    }\n    if (this.tracklist == null) {\n      this.tracklist = new Tracks({\n        collection: app.tracks\n      });\n    }\n    this.$('#tracks-display').append(this.tracklist.$el);\n    this.tracklist.render();\n    if (!$('#top-nav-title-home').hasClass('activated')) {\n      $('#top-nav-title-home').addClass('activated');\n    }\n    $('#top-nav-title-list').removeClass('activated');\n    return (_ref1 = this.offScreenNav) != null ? _ref1.$('li.activated').removeClass('activated') : void 0;\n  };\n\n  AppView.prototype.showPlayQueue = function() {\n    var _ref1;\n    if (this.tracklist != null) {\n      this.tracklist.beforeDetach();\n      this.tracklist.$el.detach();\n    }\n    if (this.playList[this.currentPlaylistId] != null) {\n      this.playList[this.currentPlaylistId].beforeDetach();\n      this.playList[this.currentPlaylistId].$el.detach();\n    }\n    if (this.queueList == null) {\n      this.queueList = new PlayQueue({\n        collection: app.playQueue\n      });\n    }\n    this.$('#tracks-display').append(this.queueList.$el);\n    this.queueList.render();\n    if (!$('#top-nav-title-list').hasClass('activated')) {\n      $('#top-nav-title-list').addClass('activated');\n    }\n    $('#top-nav-title-home').removeClass('activated');\n    return (_ref1 = this.offScreenNav) != null ? _ref1.$('li.activated').removeClass('activated') : void 0;\n  };\n\n  AppView.prototype.showPlayList = function(id) {\n    var playlistModel, _ref1;\n    if (this.tracklist != null) {\n      this.tracklist.beforeDetach();\n      this.tracklist.$el.detach();\n    }\n    if (this.queueList != null) {\n      this.queueList.beforeDetach();\n      this.queueList.$el.detach();\n    }\n    if (this.playList[this.currentPlaylistId] != null) {\n      this.playList[this.currentPlaylistId].beforeDetach();\n      this.playList[this.currentPlaylistId].$el.detach();\n    }\n    this.currentPlaylistId = id;\n    if ((_ref1 = this.offScreenNav) != null) {\n      _ref1.$('li.activated').removeClass('activated');\n    }\n    playlistModel = this.playlistCollection.get(id);\n    if (playlistModel != null) {\n      this.appendPlaylist(playlistModel);\n    } else {\n      this.listenToOnce(this.playlistCollection, 'sync', function(collection) {\n        playlistModel = collection.get(id);\n        if (playlistModel != null) {\n          return this.appendPlaylist(playlistModel);\n        } else {\n          alert('unable to get this playlist');\n          if (app.router.lastSeen === id) {\n            app.router.lastSeen = null;\n          }\n          return app.router.navigate('', true);\n        }\n      });\n    }\n    $('#top-nav-title-list').removeClass('activated');\n    return $('#top-nav-title-home').removeClass('activated');\n  };\n\n  AppView.prototype.appendPlaylist = function(playlistModel) {\n    var cid;\n    if (this.playList[this.currentPlaylistId] == null) {\n      this.playList[this.currentPlaylistId] = new Playlist({\n        collection: playlistModel.tracks\n      });\n    }\n    this.$('#tracks-display').append(this.playList[this.currentPlaylistId].$el);\n    this.playList[this.currentPlaylistId].render();\n    cid = playlistModel.cid;\n    return this.offScreenNav.views[cid].$('li').addClass('activated');\n  };\n\n  return AppView;\n\n})(BaseView);\n","\n/*\n    Inherited from playqueue (for the drag and drop feature)\n\n    Features :\n    - queue the entire list\n    - list backed up on server side\n*/\nvar BaseView, PlayListView, PlayQueueView, TrackView, Tracklist, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nTracklist = require('views/lists/tracklist');\n\nPlayQueueView = require('views/lists/playqueue');\n\nBaseView = require('lib/base_view');\n\nTrackView = require('views/lists/playlist_item');\n\nmodule.exports = PlayListView = (function(_super) {\n  __extends(PlayListView, _super);\n\n  function PlayListView() {\n    _ref = PlayListView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  PlayListView.prototype.template = require('views/templates/playlist');\n\n  PlayListView.prototype.itemview = TrackView;\n\n  PlayListView.prototype.events = {\n    'update-sort': 'updateSort',\n    'click #playlist-play': 'onClickPlay',\n    'remove-item': function(e, track) {\n      return this.collection.remove(track);\n    }\n  };\n\n  PlayListView.prototype.onClickPlay = function(event) {\n    var app, filteredCollection;\n    event.preventDefault();\n    event.stopPropagation();\n    app = require('application');\n    app.playQueue.deleteFromIndexToEnd(0);\n    filteredCollection = this.collection.filter(function(track) {\n      return track.attributes.state === 'server';\n    });\n    Backbone.Mediator.publish('tracks:queue', filteredCollection);\n    return app.router.navigate(\"playqueue\", true);\n  };\n\n  PlayListView.prototype.updateSort = function(event, track, newPosition) {\n    return this.collection.move(newPosition, track);\n  };\n\n  return PlayListView;\n\n})(PlayQueueView);\n","var PlayListItemView, TrackListItemView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nTrackListItemView = require('views/lists/tracklist_item');\n\nmodule.exports = PlayListItemView = (function(_super) {\n  __extends(PlayListItemView, _super);\n\n  function PlayListItemView() {\n    _ref = PlayListItemView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  PlayListItemView.prototype.template = require('views/templates/playlist_item');\n\n  PlayListItemView.prototype.events = {\n    'click #play-track-button': function(e) {\n      if (e.ctrlKey || e.metaKey) {\n        return this.onPlayNextTrack(e);\n      } else {\n        return this.onQueueTrack(e);\n      }\n    },\n    'click #delete-button': 'onDeleteClick',\n    'drop': 'drop'\n  };\n\n  PlayListItemView.prototype.initialize = function() {\n    var _this = this;\n    PlayListItemView.__super__.initialize.apply(this, arguments);\n    this.listenTo(this.model, 'change:state', this.onStateChange);\n    this.listenTo(this.model, 'change:title', function(event) {\n      return _this.$('td.field.title').html(_this.model.attributes.title);\n    });\n    this.listenTo(this.model, 'change:artist', function(event) {\n      return _this.$('td.field.artist').html(_this.model.attributes.artist);\n    });\n    this.listenTo(this.model, 'change:album', function(event) {\n      return _this.$('td.field.album').html(_this.model.attributes.album);\n    });\n    return this.listenTo(this.model, 'change:track', function(event) {\n      return _this.$('td.field.num').html(_this.model.attributes.track);\n    });\n  };\n\n  PlayListItemView.prototype.onQueueTrack = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.model.attributes.state === 'server') {\n      return Backbone.Mediator.publish('track:queue', this.model);\n    }\n  };\n\n  PlayListItemView.prototype.onPlayNextTrack = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.model.attributes.state === 'server') {\n      return Backbone.Mediator.publish('track:pushNext', this.model);\n    }\n  };\n\n  PlayListItemView.prototype.onDeleteClick = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    return this.$el.trigger('remove-item', this.model);\n  };\n\n  PlayListItemView.prototype.drop = function(event, index) {\n    return this.$el.trigger('update-sort', [this.model, index]);\n  };\n\n  return PlayListItemView;\n\n})(TrackListItemView);\n","\n/*\n    Inherited from tracklist\n\n    Features :\n    - drag and drop\n    - remove tracks from list\n    - maintain a pointer on the track at play\n*/\nvar PlayQueueView, TrackListView, TrackView, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nTrackView = require('views/lists/playqueue_item');\n\nTrackListView = require('views/lists/tracklist');\n\nmodule.exports = PlayQueueView = (function(_super) {\n  __extends(PlayQueueView, _super);\n\n  function PlayQueueView() {\n    this.onClickShowPrevious = __bind(this.onClickShowPrevious, this);\n    this.afterRender = __bind(this.afterRender, this);\n    _ref = PlayQueueView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  PlayQueueView.prototype.itemview = TrackView;\n\n  PlayQueueView.prototype.template = require('views/templates/playqueue');\n\n  PlayQueueView.prototype.events = {\n    'update-sort': 'updateSort',\n    'remove-item': function(e, track) {\n      return this.collection.remove(track);\n    },\n    'play-from-track': 'playFromTrack',\n    'remove-from-track': 'removeFromTrack',\n    'remove-to-track': 'removeToTrack',\n    'click .save-button': function(e) {\n      return alert('not available yet');\n    },\n    'click .show-prev-button': 'onClickShowPrevious',\n    'click .clear': 'removeFromFirst'\n  };\n\n  PlayQueueView.prototype.showPrevious = false;\n\n  PlayQueueView.prototype.initialize = function() {\n    var cookie,\n      _this = this;\n    PlayQueueView.__super__.initialize.apply(this, arguments);\n    cookie = Cookies('isShowPreviousByDefault');\n    this.showPrevious = (cookie != null) && cookie === \"true\";\n    this.listenTo(this.collection, 'change:atPlay', function() {\n      if (_this.isRendered) {\n        return _this.render();\n      }\n    });\n    return this.isRendered = false;\n  };\n\n  PlayQueueView.prototype.updateStatusDisplay = function() {\n    var id, index, view, _ref1, _results;\n    _ref1 = this.views;\n    _results = [];\n    for (id in _ref1) {\n      view = _ref1[id];\n      index = this.collection.indexOf(view.model);\n      if (index < this.collection.atPlay) {\n        if (this.showPrevious) {\n          _results.push(view.$el.addClass('already-played'));\n        } else {\n          _results.push(view.$el.addClass('hidden'));\n        }\n      } else if (index === this.collection.atPlay) {\n        _results.push(view.$el.addClass('at-play'));\n      } else {\n        _results.push(void 0);\n      }\n    }\n    return _results;\n  };\n\n  PlayQueueView.prototype.afterRender = function() {\n    PlayQueueView.__super__.afterRender.apply(this, arguments);\n    $('.tracks-display tr:odd').addClass('odd');\n    this.updateStatusDisplay();\n    this.$('#track-list').sortable({\n      opacity: 0.8,\n      delay: 150,\n      containment: \"parent\",\n      axis: \"y\",\n      placeholder: \"track sortable-placeholder\",\n      helper: function(e, tr) {\n        var $helper, $originals;\n        $originals = tr.children();\n        $helper = tr.clone();\n        $helper.children().each(function(index) {\n          return $(this).width($originals.eq(index).width());\n        });\n        return $helper;\n      },\n      stop: function(event, ui) {\n        var _ref1;\n        if (((_ref1 = event.originalEvent) != null ? _ref1.dataTransfer : void 0) != null) {\n          return;\n        }\n        return ui.item.trigger('drop', ui.item.index());\n      }\n    });\n    return this.isRendered = true;\n  };\n\n  PlayQueueView.prototype.beforeRender = function() {\n    if (this.isRendered) {\n      this.$('#track-list').sortable(\"destroy\");\n    }\n    PlayQueueView.__super__.beforeRender.apply(this, arguments);\n    return this.isRendered = false;\n  };\n\n  PlayQueueView.prototype.beforeDetach = function() {\n    if (this.isRendered) {\n      this.$('#track-list').sortable(\"destroy\");\n    }\n    PlayQueueView.__super__.beforeDetach.apply(this, arguments);\n    return this.isRendered = false;\n  };\n\n  PlayQueueView.prototype.remove = function() {\n    this.$('#track-list').sortable(\"destroy\");\n    PlayQueueView.__super__.remove.apply(this, arguments);\n    return this.isRendered = false;\n  };\n\n  PlayQueueView.prototype.disableSort = function() {\n    if (this.isRendered) {\n      return this.$(\"#track-list\").sortable(\"disable\");\n    }\n  };\n\n  PlayQueueView.prototype.enableSort = function() {\n    if (this.isRendered) {\n      return this.$(\"#track-list\").sortable(\"enable\");\n    }\n  };\n\n  PlayQueueView.prototype.updateSort = function(event, track, position) {\n    this.collection.moveItem(track, position);\n    return this.render();\n  };\n\n  PlayQueueView.prototype.playFromTrack = function(event, track) {\n    return this.collection.playFromTrack(track);\n  };\n\n  PlayQueueView.prototype.removeFromTrack = function(event, track) {\n    var index;\n    index = this.collection.indexOf(track);\n    this.collection.deleteFromIndexToEnd(index);\n    return this.render();\n  };\n\n  PlayQueueView.prototype.removeToTrack = function(event, track) {\n    var index;\n    index = this.collection.indexOf(track);\n    this.collection.deleteFromBeginingToIndex(index);\n    return this.render();\n  };\n\n  PlayQueueView.prototype.removeFromFirst = function(event) {\n    this.collection.deleteFromIndexToEnd(0);\n    return this.render();\n  };\n\n  PlayQueueView.prototype.onClickShowPrevious = function(e) {\n    this.showPrevious = !this.showPrevious;\n    Cookies.set('isShowPreviousByDefault', this.showPrevious);\n    return this.render();\n  };\n\n  return PlayQueueView;\n\n})(TrackListView);\n","var PlayQueueItemView, TrackListItemView, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nTrackListItemView = require('views/lists/tracklist_item');\n\nmodule.exports = PlayQueueItemView = (function(_super) {\n  __extends(PlayQueueItemView, _super);\n\n  function PlayQueueItemView() {\n    this.onDeleteClick = __bind(this.onDeleteClick, this);\n    this.onPlayClick = __bind(this.onPlayClick, this);\n    _ref = PlayQueueItemView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  PlayQueueItemView.prototype.template = require('views/templates/playqueue_item');\n\n  PlayQueueItemView.prototype.events = {\n    'click #mini-play-button': 'onPlayClick',\n    'click #delete-button': 'onDeleteClick',\n    'click #delete-from-here-button': function(e) {\n      if (e.ctrlKey || e.metaKey) {\n        return this.onDeleteToHereClick(e);\n      } else {\n        return this.onDeleteFromHereClick(e);\n      }\n    },\n    'drop': 'drop'\n  };\n\n  PlayQueueItemView.prototype.initialize = function() {\n    var _this = this;\n    PlayQueueItemView.__super__.initialize.apply(this, arguments);\n    this.listenTo(this.model, 'change:state', this.onStateChange);\n    this.listenTo(this.model, 'change:title', function(event) {\n      return _this.$('td.field.title').html(_this.model.attributes.title);\n    });\n    this.listenTo(this.model, 'change:artist', function(event) {\n      return _this.$('td.field.artist').html(_this.model.attributes.artist);\n    });\n    this.listenTo(this.model, 'change:album', function(event) {\n      return _this.$('td.field.album').html(_this.model.attributes.album);\n    });\n    return this.listenTo(this.model, 'change:track', function(event) {\n      return _this.$('td.field.num').html(_this.model.attributes.track);\n    });\n  };\n\n  PlayQueueItemView.prototype.onPlayClick = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    return this.$el.trigger('play-from-track', this.model);\n  };\n\n  PlayQueueItemView.prototype.onDeleteClick = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    return this.$el.trigger('remove-item', this.model);\n  };\n\n  PlayQueueItemView.prototype.onDeleteFromHereClick = function(event) {\n    return this.$el.trigger('remove-from-track', this.model);\n  };\n\n  PlayQueueItemView.prototype.onDeleteToHereClick = function(event) {\n    return this.$el.trigger('remove-to-track', this.model);\n  };\n\n  PlayQueueItemView.prototype.drop = function(event, index) {\n    return this.$el.trigger('update-sort', [this.model, index]);\n  };\n\n  return PlayQueueItemView;\n\n})(TrackListItemView);\n","\n/*\n    Basic track list.\n\n    Features :\n    - scrolling with \"nicescroll\"\n    - scroll bar management\n*/\nvar Track, TrackListView, TrackView, ViewCollection, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nTrack = require('models/track');\n\nViewCollection = require('lib/view_collection');\n\nTrackView = require('views/lists/tracklist_item');\n\nmodule.exports = TrackListView = (function(_super) {\n  __extends(TrackListView, _super);\n\n  function TrackListView() {\n    this.afterRender = __bind(this.afterRender, this);\n    _ref = TrackListView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  TrackListView.prototype.className = 'tracks-display';\n\n  TrackListView.prototype.tagName = 'div';\n\n  TrackListView.prototype.template = require('views/templates/tracklist');\n\n  TrackListView.prototype.collectionEl = '#track-list';\n\n  TrackListView.prototype.itemview = TrackView;\n\n  TrackListView.prototype.initialize = function() {\n    TrackListView.__super__.initialize.apply(this, arguments);\n    return this.views = {};\n  };\n\n  TrackListView.prototype.afterRender = function() {\n    TrackListView.__super__.afterRender.apply(this, arguments);\n    return this.$('.viewport').niceScroll({\n      cursorcolor: \"#444\",\n      cursorborder: \"\",\n      cursorwidth: \"15px\",\n      cursorborderradius: \"0px\",\n      horizrailenabled: false,\n      cursoropacitymin: \"0.3\",\n      hidecursordelay: \"700\",\n      spacebarenabled: false,\n      enablekeyboard: false\n    });\n  };\n\n  TrackListView.prototype.beforeDetach = function() {\n    return this.$('.viewport').getNiceScroll().remove();\n  };\n\n  TrackListView.prototype.remove = function() {\n    this.$('.viewport').getNiceScroll().remove();\n    return TrackListView.__super__.remove.apply(this, arguments);\n  };\n\n  return TrackListView;\n\n})(ViewCollection);\n","var BaseView, TrackListItemView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('lib/base_view');\n\nmodule.exports = TrackListItemView = (function(_super) {\n  __extends(TrackListItemView, _super);\n\n  function TrackListItemView() {\n    _ref = TrackListItemView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  TrackListItemView.prototype.className = 'track';\n\n  TrackListItemView.prototype.tagName = 'tr';\n\n  TrackListItemView.prototype.template = require('views/templates/tracklist_item');\n\n  return TrackListItemView;\n\n})(BaseView);\n","\n/*\n    Inherited from tracklist\n\n    Features :\n    - sort by title, artist or album\n    - navigate amongst files with arrows\n    - tracks are highlighted in playlist edition mode\n    - queue albums and titles\n    - add to playlist\n    - delete tracks\n    - metadata edition\n    - auto fill with blank tracks\n*/\nvar TrackListView, TrackView, TracksView, app, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\napp = require('application');\n\nTrackView = require('views/lists/tracks_item');\n\nTrackListView = require('views/lists/tracklist');\n\nmodule.exports = TracksView = (function(_super) {\n  __extends(TracksView, _super);\n\n  function TracksView() {\n    this.toggleSort = __bind(this.toggleSort, this);\n    this.onClickTableHead = __bind(this.onClickTableHead, this);\n    this.updateSortingDisplay = __bind(this.updateSortingDisplay, this);\n    this.onClickTrack = __bind(this.onClickTrack, this);\n    this.appendBlanckTrack = __bind(this.appendBlanckTrack, this);\n    this.beforeDetach = __bind(this.beforeDetach, this);\n    this.scrollCheck = __bind(this.scrollCheck, this);\n    this.afterRender = __bind(this.afterRender, this);\n    _ref = TracksView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  TracksView.prototype.template = require('views/templates/tracks');\n\n  TracksView.prototype.itemview = TrackView;\n\n  TracksView.prototype.events = {\n    'click th.field.title': function(event) {\n      return this.onClickTableHead(event, 'title');\n    },\n    'click th.field.artist': function(event) {\n      return this.onClickTableHead(event, 'artist');\n    },\n    'click th.field.album': function(event) {\n      return this.onClickTableHead(event, 'album');\n    },\n    'click th.field.plays': function(event) {\n      return this.onClickTableHead(event, 'plays');\n    },\n    'album:queue': 'queueAlbum',\n    'album:pushNext': 'pushNextAlbum',\n    'click-track': 'onClickTrack'\n  };\n\n  TracksView.prototype.minTrackListLength = 40;\n\n  TracksView.prototype.subscriptions = {\n    'uploader:addTracks': function(e) {\n      this.elementSort = null;\n      this.isReverseOrder = false;\n      this.updateSortingDisplay();\n      return this.$('.viewport').scrollTop(\"0\");\n    },\n    'uploader:addTrack': function(e) {\n      this.$(\".blank:last\").remove();\n      if (!this.$(\".track:nth-child(2)\").hasClass('odd')) {\n        return this.$(\".track:first\").addClass('odd');\n      }\n    },\n    'trackItem:remove': function(e) {\n      if (this.collection.length <= this.minTrackListLength) {\n        this.appendBlanckTrack();\n        $('tr.blank:odd').addClass('odd');\n        return $('tr.blank:even').removeClass('odd');\n      }\n    },\n    'offScreenNav:newPlaylistSelected': 'highlightTracks'\n  };\n\n  TracksView.prototype.initialize = function() {\n    TracksView.__super__.initialize.apply(this, arguments);\n    this.selectedTrackView = null;\n    this.toggleSort(Cookies('defaultSortItem') || 'artist');\n    this.elementSort = null;\n    this.listenTo(this.collection, 'sort', this.render);\n    this.listenTo(this.collection, 'sync', function(e) {\n      if (this.collection.length === 0) {\n        return Backbone.Mediator.publish('tracklist:isEmpty');\n      }\n    });\n    return Mousetrap.stopCallback = function(e, element, combo) {\n      var _ref1;\n      if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n        if ((_ref1 = e.which) === 9 || _ref1 === 13 || _ref1 === 27 || _ref1 === 113) {\n          return false;\n        }\n      }\n      return element.readOnly === false && (element.tagName === 'INPUT' || element.tagName === 'SELECT' || element.tagName === 'TEXTAREA' || (element.contentEditable && element.contentEditable === 'true'));\n    };\n  };\n\n  TracksView.prototype.afterRender = function() {\n    var i, _i, _ref1, _ref2,\n      _this = this;\n    TracksView.__super__.afterRender.apply(this, arguments);\n    this.updateSortingDisplay();\n    if (this.collection.length <= this.minTrackListLength) {\n      for (i = _i = _ref1 = this.collection.length, _ref2 = this.minTrackListLength; _ref1 <= _ref2 ? _i <= _ref2 : _i >= _ref2; i = _ref1 <= _ref2 ? ++_i : --_i) {\n        this.appendBlanckTrack();\n      }\n    }\n    $('.tracks-display tr:odd').addClass('odd');\n    if (app.selectedPlaylist != null) {\n      this.highlightTracks(app.selectedPlaylist);\n    }\n    Mousetrap.bind('up', function() {\n      var cid, index, prevCid, prevIndex, prevView, view;\n      if (_this.selectedTrackView != null) {\n        index = _this.collection.indexOf(_this.selectedTrackView.model);\n        if (index > 0) {\n          prevIndex = index - 1;\n          prevCid = _this.collection.at(prevIndex).cid;\n          prevView = _this.views[prevCid];\n          _this.scrollCheck(prevView);\n          return prevView.el.click();\n        }\n      } else {\n        cid = _this.collection.last().cid;\n        view = _this.views[cid];\n        _this.scrollCheck(view);\n        return view.el.click();\n      }\n    });\n    return Mousetrap.bind('down', function() {\n      var cid, index, nextCid, nextIndex, nextView, view;\n      if (_this.selectedTrackView != null) {\n        index = _this.collection.indexOf(_this.selectedTrackView.model);\n        if (index < _this.collection.length - 1) {\n          nextIndex = index + 1;\n          nextCid = _this.collection.at(nextIndex).cid;\n          nextView = _this.views[nextCid];\n          _this.scrollCheck(nextView);\n          return nextView.el.click();\n        }\n      } else {\n        cid = _this.collection.first().cid;\n        view = _this.views[cid];\n        _this.scrollCheck(view);\n        return view.el.click();\n      }\n    });\n  };\n\n  TracksView.prototype.scrollCheck = function(view) {\n    var bot, currScroll, diff, h, itemEl, top, vp, vph;\n    itemEl = view.$el;\n    vp = this.$('.viewport');\n    currScroll = vp.scrollTop();\n    h = itemEl.height();\n    vph = vp.height();\n    top = itemEl.position().top;\n    bot = top + h;\n    if (bot > vph) {\n      diff = bot - vph;\n      vp.scrollTop(currScroll + diff);\n    }\n    if (top < 0) {\n      return vp.scrollTop(currScroll + top);\n    }\n  };\n\n  TracksView.prototype.beforeDetach = function() {\n    if (this.selectedTrackView != null) {\n      this.selectedTrackView.unSelect();\n      this.selectedTrackView = null;\n    }\n    Mousetrap.unbind('up');\n    Mousetrap.unbind('down');\n    Mousetrap.unbind('enter');\n    TracksView.__super__.beforeDetach.apply(this, arguments);\n    return false;\n  };\n\n  TracksView.prototype.appendBlanckTrack = function() {\n    var blankTrack;\n    blankTrack = $(document.createElement('tr'));\n    blankTrack.addClass(\"track blank\");\n    blankTrack.html(\"<td colspan=\\\"7\\\"></td>\");\n    return this.$collectionEl.append(blankTrack);\n  };\n\n  TracksView.prototype.highlightTracks = function(playlist) {\n    var track, track2, _i, _len, _ref1, _results;\n    this.$('tr.in-playlist').removeClass('in-playlist');\n    if (playlist != null) {\n      _ref1 = playlist.tracks.models;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        track = _ref1[_i];\n        track2 = this.collection.get(track.id);\n        if ((track2 != null ? track2.cid : void 0) != null) {\n          _results.push(this.views[track2.cid].$el.addClass('in-playlist'));\n        } else {\n          _results.push(void 0);\n        }\n      }\n      return _results;\n    }\n  };\n\n  TracksView.prototype.onClickTrack = function(e, trackView) {\n    if (this.selectedTrackView != null) {\n      this.selectedTrackView.unSelect();\n    }\n    return this.selectedTrackView = trackView;\n  };\n\n  TracksView.prototype.updateSortingDisplay = function() {\n    var newArrow;\n    this.$('.sortArrow').remove();\n    if (this.elementSort != null) {\n      newArrow = $(document.createElement('div'));\n      if (this.isReverseOrder) {\n        newArrow.addClass('sortArrow up');\n      } else {\n        newArrow.addClass('sortArrow down');\n      }\n      return this.$('th.field.' + this.elementSort).append(newArrow);\n    }\n  };\n\n  TracksView.prototype.onClickTableHead = function(event, element) {\n    event.preventDefault();\n    event.stopPropagation();\n    return this.toggleSort(element);\n  };\n\n  TracksView.prototype.toggleSort = function(element) {\n    var compare, elementArray,\n      _this = this;\n    if (this.elementSort === element) {\n      this.isReverseOrder = !this.isReverseOrder;\n    } else {\n      this.isReverseOrder = false;\n    }\n    Cookies.set('defaultSortItem', element);\n    this.elementSort = element;\n    if (element === 'title') {\n      elementArray = ['title', 'artist', 'album', 'track'];\n    } else if (element === 'artist') {\n      elementArray = ['artist', 'album', 'track', 'title'];\n    } else if (element === 'album') {\n      elementArray = ['album', 'track', 'title', 'artist'];\n    } else if (element === 'plays') {\n      elementArray = ['plays', 'title', 'artist', 'album'];\n    } else {\n      elementArray = [element, null, null, null];\n    }\n    compare = function(t1, t2) {\n      var field1, field2, i, _i;\n      for (i = _i = 0; _i <= 3; i = ++_i) {\n        field1 = t1.get(elementArray[i]).toString();\n        field2 = t2.get(elementArray[i]).toString();\n        if (((field1.match(/^[0-9]+$/)) != null) && ((field2.match(/^[0-9]+$/)) != null)) {\n          field1 = parseInt(field1);\n          field2 = parseInt(field2);\n        } else if (((field1.match(/^[0-9]+\\/[0-9]+$/)) != null) && ((field2.match(/^[0-9]+\\/[0-9]+$/)) != null)) {\n          field1 = parseInt(field1.match(/^[0-9]+/));\n          field2 = parseInt(field2.match(/^[0-9]+/));\n        } else {\n          field1 = field1.toLowerCase();\n          field2 = field2.toLowerCase();\n        }\n        if (field1 < field2) {\n          return -1;\n        }\n        if (field1 > field2) {\n          return 1;\n        }\n      }\n      return 0;\n    };\n    if (this.isReverseOrder) {\n      this.collection.comparator = function(t1, t2) {\n        return compare(t2, t1);\n      };\n    } else {\n      this.collection.comparator = function(t1, t2) {\n        return compare(t1, t2);\n      };\n    }\n    return this.collection.sort();\n  };\n\n  TracksView.prototype.queueAlbum = function(event, album) {\n    var albumsTracks, albumsTracksF;\n    albumsTracks = this.collection.where({\n      album: album\n    });\n    albumsTracksF = albumsTracks.filter(function(track) {\n      return track.attributes.state === 'server';\n    });\n    return Backbone.Mediator.publish('tracks:queue', albumsTracksF);\n  };\n\n  TracksView.prototype.pushNextAlbum = function(event, album) {\n    var albumsTracks, albumsTracksF;\n    albumsTracks = this.collection.where({\n      album: album\n    });\n    albumsTracksF = albumsTracks.filter(function(track) {\n      return track.attributes.state === 'server';\n    });\n    return Backbone.Mediator.publish('tracks:pushNext', albumsTracksF);\n  };\n\n  return TracksView;\n\n})(TrackListView);\n","var TrackListItemView, TracksItemView, app, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nTrackListItemView = require('views/lists/tracklist_item');\n\napp = require('application');\n\nmodule.exports = TracksItemView = (function(_super) {\n  __extends(TracksItemView, _super);\n\n  function TracksItemView() {\n    this.importBegin = __bind(this.importBegin, this);\n    this.returnToNormal = __bind(this.returnToNormal, this);\n    this.onUploadProgressChange = __bind(this.onUploadProgressChange, this);\n    this.onCtrlEnter = __bind(this.onCtrlEnter, this);\n    this.onEnter = __bind(this.onEnter, this);\n    this.onDeleteClick = __bind(this.onDeleteClick, this);\n    this.disableEdition = __bind(this.disableEdition, this);\n    this.unSelect = __bind(this.unSelect, this);\n    this.onClick = __bind(this.onClick, this);\n    _ref = TracksItemView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  TracksItemView.prototype.template = require('views/templates/tracks_item');\n\n  TracksItemView.prototype.events = {\n    'click #delete-button': 'onDeleteClick',\n    'click #play-track-button': function(e) {\n      if (e.ctrlKey || e.metaKey) {\n        return this.onPlayNextTrack(e);\n      } else {\n        return this.onQueueTrack(e);\n      }\n    },\n    'click #add-to-button': function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      if (app.selectedPlaylist != null) {\n        return this.onAddTo();\n      } else {\n        return alert(\"No playlist selected. Please select a playlist in the navigation bar on the left\");\n      }\n    },\n    'dblclick [id$=\"button\"]': function(event) {\n      event.preventDefault();\n      return event.stopPropagation();\n    },\n    'dblclick': function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      if (this.isEdited !== '') {\n        this.disableEdition();\n        this.isEdited = '';\n      }\n      return this.onDblClick(e);\n    },\n    'click #play-album-button': function(e) {\n      if (e.ctrlKey || e.metaKey) {\n        return this.onPlayNextAlbum(e);\n      } else {\n        return this.onQueueAlbum(e);\n      }\n    },\n    'click .title': function(e) {\n      return this.onClick(e, 'title');\n    },\n    'click .artist': function(e) {\n      return this.onClick(e, 'artist');\n    },\n    'click .album': function(e) {\n      return this.onClick(e, 'album');\n    },\n    'click': function(e) {\n      return this.onClick(e, '');\n    }\n  };\n\n  TracksItemView.prototype.initialize = function() {\n    var _this = this;\n    TracksItemView.__super__.initialize.apply(this, arguments);\n    this.listenTo(this.model, 'change:state', this.onStateChange);\n    this.listenTo(this.model, 'change:title', function(event) {\n      return _this.$('td.field.title input').val(_this.model.attributes.title);\n    });\n    this.listenTo(this.model, 'change:artist', function(event) {\n      return _this.$('td.field.artist input').val(_this.model.attributes.artist);\n    });\n    this.listenTo(this.model, 'change:album', function(event) {\n      return _this.$('td.field.album input').val(_this.model.attributes.album);\n    });\n    this.listenTo(this.model, 'change:track', function(event) {\n      return _this.$('td.field.num').html(_this.model.attributes.track);\n    });\n    return this.isEdited = '';\n  };\n\n  TracksItemView.prototype.onClick = function(event, element) {\n    var _this = this;\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.model.attributes.state === 'server') {\n      if (this.$el.hasClass('selected')) {\n        if (this.isEdited !== element) {\n          if (this.isEdited !== '') {\n            this.disableEdition();\n          }\n          this.isEdited = element;\n          return this.enableEdition();\n        }\n      } else {\n        this.$el.addClass('selected');\n        this.$el.trigger('click-track', this);\n        Mousetrap.bind('f2', function() {\n          if (_this.isEdited === '') {\n            _this.isEdited = 'title';\n            return _this.enableEdition();\n          }\n        });\n        Mousetrap.bind('enter', this.onEnter);\n        return Mousetrap.bind('ctrl+enter', this.onCtrlEnter);\n      }\n    }\n  };\n\n  TracksItemView.prototype.unSelect = function() {\n    var selector;\n    this.$el.removeClass('selected');\n    if (this.isEdited !== '') {\n      selector = \".\" + this.isEdited + \" input\";\n      this.disableEdition();\n      this.isEdited = '';\n    }\n    Mousetrap.unbind('f2');\n    Mousetrap.unbind('enter', this.onEnter);\n    return Mousetrap.unbind('ctrl+enter', this.onCtrlEnter);\n  };\n\n  TracksItemView.prototype.enableEdition = function() {\n    var selector,\n      _this = this;\n    if (this.isEdited !== '') {\n      selector = \".\" + this.isEdited + \" input\";\n      if (!this.$(selector).hasClass('activated')) {\n        this.$(selector).addClass('activated');\n        this.$(selector).removeAttr('readonly');\n        this.$(selector).focus();\n        this.$(selector).select();\n        this.tmpValue = this.$(selector).val();\n        Mousetrap.unbind('enter', this.onEnter);\n        Mousetrap.unbind('ctrl+enter', this.onCtrlEnter);\n        Mousetrap.bind('enter', function() {\n          _this.disableEdition();\n          return _this.isEdited = '';\n        });\n        Mousetrap.bind('esc', function() {\n          _this.$(selector).val(_this.tmpValue);\n          _this.disableEdition(false);\n          return _this.isEdited = '';\n        });\n        return Mousetrap.bind('tab', function(e) {\n          var oldEdit;\n          e.preventDefault();\n          _this.disableEdition();\n          oldEdit = _this.isEdited;\n          _this.isEdited = (function() {\n            switch (false) {\n              case oldEdit !== 'title':\n                return 'artist';\n              case oldEdit !== 'artist':\n                return 'album';\n              case oldEdit !== 'album':\n                return 'title';\n            }\n          })();\n          return _this.enableEdition();\n        });\n      }\n    }\n  };\n\n  TracksItemView.prototype.disableEdition = function(save) {\n    var selector;\n    if (save == null) {\n      save = true;\n    }\n    if (this.isEdited !== '') {\n      selector = \".\" + this.isEdited + \" input\";\n      if (this.$(selector).hasClass('activated')) {\n        if (save && this.$(selector).val() !== this.tmpValue) {\n          this.saveNewValue();\n        }\n        this.$(selector).blur();\n        this.$(selector).attr('readonly', 'readonly');\n        this.$(selector).removeClass('activated');\n        this.tmpValue = null;\n        Mousetrap.unbind('enter');\n        Mousetrap.unbind('esc');\n        Mousetrap.unbind('tab');\n        Mousetrap.bind('enter', this.onEnter);\n        return Mousetrap.bind('ctrl+enter', this.onCtrlEnter);\n      }\n    }\n  };\n\n  TracksItemView.prototype.saveNewValue = function() {\n    var selector, val,\n      _this = this;\n    selector = \".\" + this.isEdited + \" input\";\n    val = this.$(selector).val();\n    this.tmpValue = val;\n    switch (false) {\n      case this.isEdited !== 'title':\n        this.model.attributes.title = val;\n        break;\n      case this.isEdited !== 'artist':\n        this.model.attributes.artist = val;\n        break;\n      case this.isEdited !== 'album':\n        this.model.attributes.album = val;\n    }\n    this.saving = true;\n    return this.model.save({\n      success: function() {\n        return _this.saving = false;\n      },\n      error: function() {\n        alert(\"An error occured, modifications were not saved.\");\n        return _this.saving = false;\n      }\n    });\n  };\n\n  TracksItemView.prototype.afterRender = function() {\n    var state;\n    TracksItemView.__super__.afterRender.apply(this, arguments);\n    state = this.model.attributes.state;\n    if (state === 'client') {\n      return this.initUpload();\n    } else if (state === 'uploadStart') {\n      this.initUpload();\n      return this.startUpload();\n    } else if (state === 'importBegin') {\n      return this.importBegin();\n    }\n  };\n\n  TracksItemView.prototype.onDeleteClick = function(event) {\n    var state,\n      _this = this;\n    event.preventDefault();\n    event.stopPropagation();\n    state = this.model.attributes.state;\n    if (state === 'uploadStart' || state === 'importBegin') {\n      alert(\"Wait for upload to finish to delete this track\");\n      return;\n    }\n    if (state === 'client') {\n      this.model.set({\n        state: 'canceled'\n      });\n    }\n    this.model.destroy({\n      error: function() {\n        return alert(\"Server error occured, track was not deleted.\");\n      }\n    });\n    return Backbone.Mediator.publish('trackItem:remove');\n  };\n\n  TracksItemView.prototype.onDblClick = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.model.attributes.state === 'server') {\n      return Backbone.Mediator.publish('track:playImmediate', this.model);\n    }\n  };\n\n  TracksItemView.prototype.onQueueTrack = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.model.attributes.state === 'server') {\n      return Backbone.Mediator.publish('track:queue', this.model);\n    }\n  };\n\n  TracksItemView.prototype.onPlayNextTrack = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.model.attributes.state === 'server') {\n      return Backbone.Mediator.publish('track:pushNext', this.model);\n    }\n  };\n\n  TracksItemView.prototype.onEnter = function(event) {\n    if (this.model.attributes.state === 'server') {\n      return Backbone.Mediator.publish('track:queue', this.model);\n    }\n  };\n\n  TracksItemView.prototype.onCtrlEnter = function(event) {\n    if (this.model.attributes.state === 'server') {\n      return Backbone.Mediator.publish('track:pushNext', this.model);\n    }\n  };\n\n  TracksItemView.prototype.onQueueAlbum = function(event) {\n    var album;\n    event.preventDefault();\n    event.stopPropagation();\n    album = this.model.attributes.album;\n    if ((album != null) && album !== '') {\n      return this.$el.trigger('album:queue', album);\n    } else {\n      return alert(\"can't play null album\");\n    }\n  };\n\n  TracksItemView.prototype.onPlayNextAlbum = function(event) {\n    var album;\n    event.preventDefault();\n    event.stopPropagation();\n    album = this.model.attributes.album;\n    if ((album != null) && album !== '') {\n      return this.$el.trigger('album:pushNext', album);\n    } else {\n      return alert(\"can't play null album\");\n    }\n  };\n\n  TracksItemView.prototype.onAddTo = function() {\n    if (this.model.attributes.state === 'server') {\n      app.selectedPlaylist.tracks.add(this.model);\n      if (!this.$el.hasClass('in-playlist')) {\n        return this.$el.addClass('in-playlist');\n      }\n    }\n  };\n\n  TracksItemView.prototype.onUploadProgressChange = function(e) {\n    var el, pct;\n    if (e.lengthComputable) {\n      pct = Math.floor((e.loaded / e.total) * 100);\n      el = this.$('.uploadProgress');\n      if (el != null) {\n        el.before(el.clone(true)).remove();\n        return this.$('.uploadProgress').html(\"\" + pct + \"%\");\n      }\n    } else {\n      return console.warn('Content Length not reported!');\n    }\n  };\n\n  TracksItemView.prototype.onStateChange = function() {\n    if (this.model.attributes.state === 'client') {\n      return this.initUpload();\n    } else if (this.model.attributes.state === 'uploadStart') {\n      return this.startUpload();\n    } else if (this.model.attributes.state === 'uploadEnd') {\n      return this.endUpload();\n    } else if (this.model.attributes.state === 'importBegin') {\n      return this.importBegin();\n    }\n  };\n\n  TracksItemView.prototype.initUpload = function() {\n    var uploadProgress;\n    this.saveAddBtn = this.$('#add-to-button').detach();\n    this.savePlayTrackBtn = this.$('#play-track-button').detach();\n    uploadProgress = $(document.createElement('div'));\n    uploadProgress.addClass('uploadProgress');\n    uploadProgress.html('INIT');\n    return this.$('#state').append(uploadProgress);\n  };\n\n  TracksItemView.prototype.startUpload = function() {\n    this.$('.uploadProgress').html('0%');\n    return this.listenTo(this.model, 'progress', this.onUploadProgressChange);\n  };\n\n  TracksItemView.prototype.endUpload = function() {\n    this.stopListening(this.model, 'progress');\n    this.$('.uploadProgress').html('DONE');\n    return this.$('.uploadProgress').delay(1000).fadeOut(1000, this.returnToNormal);\n  };\n\n  TracksItemView.prototype.returnToNormal = function() {\n    this.$('.uploadProgress').remove();\n    this.$('#state').append(this.saveAddBtn);\n    this.$('#state').append(this.savePlayTrackBtn);\n    return this.model.attributes.state = 'server';\n  };\n\n  TracksItemView.prototype.importBegin = function() {\n    var uploadProgress;\n    this.saveAddBtn = this.$('#add-to-button').detach();\n    this.savePlayTrackBtn = this.$('#play-track-button').detach();\n    uploadProgress = $(document.createElement('div'));\n    uploadProgress.addClass('uploadProgress');\n    uploadProgress.html('WAIT');\n    return this.$('#state').append(uploadProgress);\n  };\n\n  return TracksItemView;\n\n})(TrackListItemView);\n","\n/*\n  Off screen nav view\n*/\nvar BaseView, OffScreenNav, Playlist, PlaylistNavView, ViewCollection, app, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\napp = require('application');\n\nBaseView = require('lib/base_view');\n\nPlaylist = require('models/playlist');\n\nPlaylistNavView = require('views/playlist_nav_view');\n\nViewCollection = require('lib/view_collection');\n\nmodule.exports = OffScreenNav = (function(_super) {\n  __extends(OffScreenNav, _super);\n\n  function OffScreenNav() {\n    this.toggleNav = __bind(this.toggleNav, this);\n    this.magicToggle = __bind(this.magicToggle, this);\n    this.afterRender = __bind(this.afterRender, this);\n    _ref = OffScreenNav.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  OffScreenNav.prototype.className = 'off-screen-nav';\n\n  OffScreenNav.prototype.tagName = 'div';\n\n  OffScreenNav.prototype.template = require('views/templates/off_screen_nav');\n\n  OffScreenNav.prototype.itemview = PlaylistNavView;\n\n  OffScreenNav.prototype.collectionEl = '#playlist-list';\n\n  OffScreenNav.prototype.magicCounterSensibility = 2;\n\n  OffScreenNav.prototype.magicCounter = OffScreenNav.magicCounterSensibility;\n\n  OffScreenNav.prototype.events = {\n    'click .add-playlist-button': 'onAddPlaylist',\n    'playlist-selected': 'onPlaylistSelected',\n    'playlist-unselected': 'unSelect',\n    'click': function(e) {\n      return this.toggleNav();\n    },\n    'mousemove': function(e) {\n      if (!this.onScreen) {\n        return this.magicToggle(e);\n      }\n    },\n    'mouseleave': function(e) {\n      if (this.onScreen) {\n        return this.toggleNav();\n      }\n    }\n  };\n\n  OffScreenNav.prototype.initialize = function(options) {\n    OffScreenNav.__super__.initialize.apply(this, arguments);\n    return this.listenTo(this.collection, 'remove', function(playlist) {\n      if (app.selectedPlaylist === playlist) {\n        return this.unSelect();\n      }\n    });\n  };\n\n  OffScreenNav.prototype.afterRender = function() {\n    OffScreenNav.__super__.afterRender.apply(this, arguments);\n    this.$('#playlist-list').niceScroll({\n      cursorcolor: \"#fff\",\n      cursorborder: \"\",\n      cursorwidth: \"2px\",\n      hidecursordelay: \"700\",\n      horizrailenabled: false,\n      spacebarenabled: false,\n      enablekeyboard: false\n    });\n    return this.onScreen = this.$('.off-screen-nav-content').hasClass('off-screen-nav-show');\n  };\n\n  OffScreenNav.prototype.magicToggle = function(e) {\n    if (e.pageX === 0) {\n      this.magicCounter -= 1;\n    } else {\n      this.magicCounter = this.magicCounterSensibility;\n    }\n    if (this.magicCounter === 0) {\n      this.magicCounter = this.magicCounterSensibility;\n      return this.toggleNav();\n    }\n  };\n\n  OffScreenNav.prototype.toggleNav = function() {\n    this.onScreen = !this.onScreen;\n    this.$('.off-screen-nav-content').toggleClass('off-screen-nav-show');\n    return this.updateDisplay();\n  };\n\n  OffScreenNav.prototype.updateDisplay = function() {\n    if (this.$('.off-screen-nav-content').hasClass('off-screen-nav-show')) {\n      return this.$('.off-screen-nav-toggle-arrow').addClass('on');\n    } else {\n      return this.$('.off-screen-nav-toggle-arrow').removeClass('on');\n    }\n  };\n\n  OffScreenNav.prototype.onAddPlaylist = function(event) {\n    var defaultMsg, defaultVal, playlist, title,\n      _this = this;\n    event.preventDefault();\n    event.stopPropagation();\n    title = \"\";\n    defaultMsg = \"Please enter the new playlist title :\";\n    defaultVal = \"my playlist\";\n    while (!(title !== \"\" && title.length < 50)) {\n      title = prompt(defaultMsg, defaultVal);\n      if (title == null) {\n        return;\n      }\n      defaultMsg = \"Invalid title, please try again :\";\n      defaultVal = title;\n    }\n    playlist = new Playlist({\n      title: title\n    });\n    return this.collection.create(playlist, {\n      success: function(model) {\n        _this.views[model.cid].$('.select-playlist-button').trigger('click');\n        return app.router.navigate('', true);\n      },\n      error: function() {\n        return alert(\"Server error occured, playlist wasn't created\");\n      }\n    });\n  };\n\n  OffScreenNav.prototype.onPlaylistSelected = function(event, playlist) {\n    if (app.selectedPlaylist != null) {\n      this.views[app.selectedPlaylist.cid].$('li').removeClass('selected');\n    }\n    app.selectedPlaylist = playlist;\n    return Backbone.Mediator.publish('offScreenNav:newPlaylistSelected', playlist);\n  };\n\n  OffScreenNav.prototype.unSelect = function() {\n    app.selectedPlaylist = null;\n    return Backbone.Mediator.publish('offScreenNav:newPlaylistSelected', null);\n  };\n\n  return OffScreenNav;\n\n})(ViewCollection);\n","\n/*\n    Here is the player. This is the bridge beetween Soundmanager2 and Cozic.\n*/\nvar BaseView, Player, VolumeManager, app, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('lib/base_view');\n\nVolumeManager = require('./volumeManager');\n\napp = require('application');\n\nmodule.exports = Player = (function(_super) {\n  __extends(Player, _super);\n\n  function Player() {\n    this.updateProgressDisplay = __bind(this.updateProgressDisplay, this);\n    this.printLoadingInfo = __bind(this.printLoadingInfo, this);\n    this.onToggleMute = __bind(this.onToggleMute, this);\n    this.volumeFilter = __bind(this.volumeFilter, this);\n    this.onVolumeChange = __bind(this.onVolumeChange, this);\n    this.stopTrack = __bind(this.stopTrack, this);\n    this.onPlayFinish = __bind(this.onPlayFinish, this);\n    this.onPlayTrack = __bind(this.onPlayTrack, this);\n    this.onPlayImmediate = __bind(this.onPlayImmediate, this);\n    this.onPushNextMultiple = __bind(this.onPushNextMultiple, this);\n    this.onPushNext = __bind(this.onPushNext, this);\n    this.onQueueTrackMultiple = __bind(this.onQueueTrackMultiple, this);\n    this.onQueueTrack = __bind(this.onQueueTrack, this);\n    this.onClickFwd = __bind(this.onClickFwd, this);\n    this.onClickRwd = __bind(this.onClickRwd, this);\n    this.onClickPlay = __bind(this.onClickPlay, this);\n    this.updatePlayButtonDisplay = __bind(this.updatePlayButtonDisplay, this);\n    this.afterRender = __bind(this.afterRender, this);\n    _ref = Player.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  Player.prototype.className = 'player';\n\n  Player.prototype.tagName = 'div';\n\n  Player.prototype.template = require('views/templates/player/player');\n\n  Player.prototype.events = {\n    'click #play-button': 'onClickPlay',\n    'click #rwd-button': 'onClickRwd',\n    'click #fwd-button': 'onClickFwd',\n    'mousedown .progress': 'onMouseDownProgress',\n    'click #loop-button': 'onClickLoop',\n    'click #random-button': 'onClickRandom',\n    'soundManager:ready': function(e) {\n      this.isLoading = false;\n      this.canPlay = true;\n      return this.updatePlayButtonDisplay();\n    },\n    'soundManager:timeout': function(e) {\n      this.isLoading = false;\n      this.canPlay = false;\n      return this.updatePlayButtonDisplay();\n    }\n  };\n\n  Player.prototype.subscriptions = {\n    'track:queue': 'onQueueTrack',\n    'tracks:queue': 'onQueueTrackMultiple',\n    'track:pushNext': 'onPushNext',\n    'tracks:pushNext': 'onPushNextMultiple',\n    'track:playImmediate': 'onPlayImmediate',\n    'track:play-from': function(track) {\n      return this.onPlayTrack(track);\n    },\n    'track:delete': function(soundId) {\n      var _ref1;\n      if (((_ref1 = this.currentSound) != null ? _ref1.id : void 0) === soundId) {\n        return this.stopTrack();\n      }\n    },\n    'volumeManager:toggleMute': 'onToggleMute',\n    'volumeManager:volumeChanged': 'onVolumeChange'\n  };\n\n  Player.prototype.initialize = function(options) {\n    this.isStopped = true;\n    this.isPaused = false;\n    this.canPlay = false;\n    this.isLoading = true;\n    Player.__super__.initialize.apply(this, arguments);\n    Mousetrap.bind('space', this.onClickPlay);\n    Mousetrap.bind('b', this.onClickRwd);\n    return Mousetrap.bind('n', this.onClickFwd);\n  };\n\n  Player.prototype.afterRender = function() {\n    Player.__super__.afterRender.apply(this, arguments);\n    this.playButton = this.$('#play-button');\n    if (Cookies('defaultVolume') != null) {\n      this.volume = parseInt(Cookies('defaultVolume'));\n    } else {\n      this.volume = 50;\n    }\n    this.isMuted = (Cookies('isMuteByDefault') != null) && Cookies('isMuteByDefault') === \"true\";\n    this.volumeManager = new VolumeManager({\n      initVol: this.volume,\n      initMute: this.isMuted\n    });\n    this.volumeManager.render();\n    this.$('#volume').append(this.volumeManager.$el);\n    this.elapsedTime = this.$('#elapsedTime');\n    this.remainingTime = this.$('#remainingTime');\n    this.progress = this.$('.progress');\n    this.progressInner = this.$('.progress .inner');\n    this.currentSound = null;\n    this.progressInner.width(\"0%\");\n    this.elapsedTime.html(\"&nbsp;0:00\");\n    this.remainingTime.html(\"&nbsp;0:00\");\n    return this.updatePlayButtonDisplay();\n  };\n\n  Player.prototype.updatePlayButtonDisplay = function() {\n    var icon;\n    icon = this.$('#play-button i');\n    icon.removeClass('icon-warning-sign icon-play icon-pause icon-cogs');\n    icon.removeClass('activated');\n    if (this.isLoading) {\n      return icon.addClass('icon-cogs');\n    } else if (!this.canPlay) {\n      return icon.addClass('icon-warning-sign activated');\n    } else if (this.isStopped || this.isPaused) {\n      return icon.addClass('icon-play');\n    } else {\n      return icon.addClass('icon-pause');\n    }\n  };\n\n  Player.prototype.onClickPlay = function() {\n    var _this = this;\n    if (!this.isLoading) {\n      if (this.canPlay) {\n        if (this.currentSound != null) {\n          if (this.isStopped) {\n            this.currentSound.play();\n            this.isStopped = false;\n          } else if (this.isPaused) {\n            this.currentSound.play();\n            this.isPaused = false;\n          } else if (!this.isPaused && !this.isStopped) {\n            this.currentSound.pause();\n            this.isPaused = true;\n          }\n        } else if (app.playQueue.getCurrentTrack() != null) {\n          if (this.isStopped) {\n            this.onPlayTrack(app.playQueue.getCurrentTrack());\n          }\n        } else if (app.playQueue.length === 0) {\n          app.tracks.each(function(track) {\n            if (track.attributes.state === 'server') {\n              return _this.onQueueTrack(track);\n            }\n          });\n        }\n        return this.updatePlayButtonDisplay();\n      } else {\n        return alert(\"application error : unable to play track\");\n      }\n    }\n  };\n\n  Player.prototype.onClickRwd = function() {\n    var prevTrack;\n    if ((this.currentSound != null) && !this.isStopped && this.currentSound.position > 3000) {\n      this.currentSound.setPosition(0);\n      return this.updateProgressDisplay();\n    } else {\n      prevTrack = app.playQueue.getPrevTrack();\n      if (prevTrack != null) {\n        return this.onPlayTrack(prevTrack);\n      }\n    }\n  };\n\n  Player.prototype.onClickFwd = function() {\n    var nextTrack;\n    nextTrack = app.playQueue.getNextTrack();\n    if (nextTrack != null) {\n      return this.onPlayTrack(nextTrack);\n    }\n  };\n\n  Player.prototype.onMouseDownProgress = function(event) {\n    var handlePositionPx, percent;\n    if (this.currentSound != null) {\n      event.preventDefault();\n      handlePositionPx = event.clientX - this.progress.offset().left;\n      percent = handlePositionPx / this.progress.width();\n      if (this.currentSound.durationEstimate * percent < this.currentSound.duration) {\n        this.currentSound.setPosition(this.currentSound.durationEstimate * percent);\n        return this.updateProgressDisplay();\n      }\n    }\n  };\n\n  Player.prototype.onQueueTrack = function(track) {\n    var _ref1;\n    if (((_ref1 = this.currentSound) != null ? _ref1.id : void 0) === (\"sound-\" + (track.get('id')))) {\n      return;\n    }\n    app.playQueue.queue(track);\n    if (app.playQueue.length === 1) {\n      return this.onPlayTrack(app.playQueue.getCurrentTrack());\n    } else if (app.playQueue.length - 2 === app.playQueue.atPlay && this.isStopped) {\n      return this.onPlayTrack(app.playQueue.getNextTrack());\n    }\n  };\n\n  Player.prototype.onQueueTrackMultiple = function(tracks) {\n    var track, _i, _len, _results;\n    _results = [];\n    for (_i = 0, _len = tracks.length; _i < _len; _i++) {\n      track = tracks[_i];\n      _results.push(this.onQueueTrack(track));\n    }\n    return _results;\n  };\n\n  Player.prototype.onPushNext = function(track) {\n    var _ref1;\n    if (((_ref1 = this.currentSound) != null ? _ref1.id : void 0) === (\"sound-\" + (track.get('id')))) {\n      return;\n    }\n    app.playQueue.pushNext(track);\n    if (app.playQueue.length === 1) {\n      return this.onPlayTrack(app.playQueue.getCurrentTrack());\n    } else if (app.playQueue.length - 2 === app.playQueue.atPlay && this.isStopped) {\n      return this.onPlayTrack(app.playQueue.getNextTrack());\n    }\n  };\n\n  Player.prototype.onPushNextMultiple = function(tracks) {\n    var pq, track, _i, _len, _results;\n    pq = app.playQueue;\n    if (pq.length === 0 || (pq.length - 1 === pq.atPlay && this.isStopped)) {\n      this.onPushNext(tracks.shift());\n    }\n    tracks.reverse();\n    _results = [];\n    for (_i = 0, _len = tracks.length; _i < _len; _i++) {\n      track = tracks[_i];\n      _results.push(this.onPushNext(track));\n    }\n    return _results;\n  };\n\n  Player.prototype.onPlayImmediate = function(track) {\n    var nextTrack, _ref1;\n    if (((_ref1 = this.currentSound) != null ? _ref1.id : void 0) === (\"sound-\" + (track.get('id')))) {\n      nextTrack = track;\n    } else {\n      app.playQueue.pushNext(track);\n      if (app.playQueue.length === 1) {\n        nextTrack = app.playQueue.getCurrentTrack();\n      } else {\n        nextTrack = app.playQueue.getNextTrack();\n      }\n    }\n    return this.onPlayTrack(nextTrack);\n  };\n\n  Player.prototype.onPlayTrack = function(track) {\n    var artist, encA, encT, nfo, title, url;\n    Backbone.Mediator.publish('player:start-sound', track.get('id'));\n    if (this.currentSound != null) {\n      if (this.currentSound.id === (\"sound-\" + (track.get('id')))) {\n        this.currentSound.setPosition(0);\n        this.currentSound.play();\n        this.updateProgressDisplay();\n        return;\n      } else {\n        this.stopTrack();\n      }\n    }\n    url = \"tracks/\" + (track.get('id')) + \"/attach/\" + (track.get('slug'));\n    this.currentSound = app.soundManager.createSound({\n      id: \"sound-\" + (track.get('id')),\n      url: url,\n      usePolicyFile: true,\n      volume: this.volumeFilter(this.volume),\n      autoPlay: true,\n      onfinish: this.onPlayFinish,\n      onstop: this.stopTrack,\n      whileplaying: this.updateProgressDisplay,\n      multiShot: false\n    });\n    if (this.isMuted) {\n      this.currentSound.mute();\n    }\n    this.isStopped = false;\n    this.isPaused = false;\n    this.updatePlayButtonDisplay();\n    title = track.get('title');\n    artist = track.get('artist');\n    nfo = \"\" + title + \" - <i>\" + artist + \"</i>\";\n    this.$('.id3-info').html(nfo);\n    encT = title === \"\" ? \"%20\" : encodeURIComponent(title);\n    encA = artist === \"\" ? \"%20\" : encodeURIComponent(artist);\n    $.ajax(\"broadcast/\" + (encodeURIComponent(url)) + \"/\" + encT + \"/\" + encA, {\n      type: 'PUT',\n      error: function(jqXHR, textStatus, errorThrown) {\n        return console.log(\"ajax fail : \" + textStatus);\n      }\n    });\n    if (app.isBroadcastEnabled) {\n      return $.ajax(\"broadcast\", {\n        type: 'GET',\n        error: function(jqXHR, textStatus, errorThrown) {\n          return console.log(\"ajax fail : \" + textStatus);\n        }\n      });\n    }\n  };\n\n  Player.prototype.onPlayFinish = function() {\n    var nextTrack;\n    nextTrack = app.playQueue.getNextTrack();\n    if (nextTrack != null) {\n      return this.onPlayTrack(nextTrack);\n    } else {\n      return this.stopTrack();\n    }\n  };\n\n  Player.prototype.stopTrack = function() {\n    Backbone.Mediator.publish('player:stop-sound');\n    if (this.currentSound != null) {\n      this.currentSound.destruct();\n      this.currentSound = null;\n    }\n    this.isStopped = true;\n    this.isPaused = false;\n    this.updatePlayButtonDisplay();\n    this.progressInner.width(\"0%\");\n    this.elapsedTime.html(\"&nbsp;0:00\");\n    this.remainingTime.html(\"&nbsp;0:00\");\n    this.$('.id3-info').html(\"-\");\n    if (app.isBroadcastEnabled) {\n      return $.ajax(\"broadcast\", {\n        type: 'DELETE',\n        error: function(jqXHR, textStatus, errorThrown) {\n          return console.log(\"ajax fail : \" + textStatus);\n        }\n      });\n    }\n  };\n\n  Player.prototype.onVolumeChange = function(volume) {\n    this.volume = volume;\n    Cookies.set('defaultVolume', volume);\n    if (this.currentSound != null) {\n      return this.currentSound.setVolume(this.volumeFilter(volume));\n    }\n  };\n\n  Player.prototype.volumeFilter = function(volume) {\n    var newVol;\n    newVol = volume * 0.01;\n    newVol = newVol * newVol;\n    newVol = newVol * 100 + 1;\n    return newVol;\n  };\n\n  Player.prototype.onToggleMute = function() {\n    this.isMuted = !this.isMuted;\n    Cookies.set('isMuteByDefault', \"\" + this.isMuted);\n    if (this.currentSound != null) {\n      return this.currentSound.toggleMute();\n    }\n  };\n\n  Player.prototype.formatMs = function(ms) {\n    var m, s;\n    s = Math.floor((ms / 1000) % 60);\n    if (s < 10) {\n      s = \"0\" + s;\n    }\n    m = Math.floor(ms / 60000);\n    if (m < 10) {\n      m = \"&nbsp;\" + m;\n    }\n    return \"\" + m + \":\" + s;\n  };\n\n  Player.prototype.printLoadingInfo = function() {\n    var bl, buf, i, printBuf, tot, _i, _len, _ref1,\n      _this = this;\n    bl = Math.floor(this.currentSound.bytesLoaded / this.currentSound.bytesTotal * 100);\n    if (this.bytesLoaded == null) {\n      this.bytesLoaded = -1;\n    }\n    if (this.bytesLoaded !== bl) {\n      this.bytesLoaded = bl;\n      tot = this.currentSound.durationEstimate;\n      console.log(\"is buffering : \" + this.currentSound.isBuffering);\n      console.log(\"buffered :\");\n      printBuf = function(buf) {\n        return console.log(\"[\" + (Math.floor(buf.start / tot * 100)) + \"% - \" + (Math.floor(buf.end / tot * 100)) + \"%]\");\n      };\n      _ref1 = this.currentSound.buffered;\n      for (i = _i = 0, _len = _ref1.length; _i < _len; i = ++_i) {\n        buf = _ref1[i];\n        printBuf(this.currentSound.buffered[i]);\n      }\n      console.log(\"bytes loaded : \" + bl);\n      return console.log(\"\");\n    } else {\n      return console.log(\"refresh\");\n    }\n  };\n\n  Player.prototype.updateProgressDisplay = function() {\n    var newWidth, remainingTime;\n    newWidth = this.currentSound.position / this.currentSound.durationEstimate * 100;\n    this.progressInner.width(\"\" + newWidth + \"%\");\n    this.elapsedTime.html(this.formatMs(this.currentSound.position));\n    remainingTime = this.currentSound.durationEstimate - this.currentSound.position;\n    return this.remainingTime.html(this.formatMs(remainingTime));\n  };\n\n  Player.prototype.onClickLoop = function() {\n    var loopIcon;\n    loopIcon = this.$('#loop-button i');\n    if (loopIcon.hasClass('icon-refresh')) {\n      if (loopIcon.hasClass('activated')) {\n        app.playQueue.playLoop = 'repeat-one';\n        loopIcon.toggleClass('activated');\n        return loopIcon.toggleClass('icon-refresh icon-repeat activated');\n      } else {\n        app.playQueue.playLoop = 'repeat-all';\n        return loopIcon.toggleClass('activated');\n      }\n    } else {\n      app.playQueue.playLoop = 'no-repeat';\n      return loopIcon.toggleClass('icon-refresh icon-repeat activated');\n    }\n  };\n\n  Player.prototype.onClickRandom = function() {\n    return app.playQueue.randomize();\n  };\n\n  return Player;\n\n})(BaseView);\n","var BaseView, VolumeManager, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('lib/base_view');\n\nmodule.exports = VolumeManager = (function(_super) {\n  __extends(VolumeManager, _super);\n\n  function VolumeManager() {\n    this.toggleMute = __bind(this.toggleMute, this);\n    this.volDown = __bind(this.volDown, this);\n    this.volUp = __bind(this.volUp, this);\n    this.onClickToggleMute = __bind(this.onClickToggleMute, this);\n    this.onMouseUpSlider = __bind(this.onMouseUpSlider, this);\n    this.onMouseMoveSlider = __bind(this.onMouseMoveSlider, this);\n    _ref = VolumeManager.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  VolumeManager.prototype.className = 'volume';\n\n  VolumeManager.prototype.tagName = 'div';\n\n  VolumeManager.prototype.template = require('views/templates/player/volumeManager');\n\n  VolumeManager.prototype.events = {\n    'mousedown .slider': 'onMouseDownSlider',\n    'click #volume-switch-button': 'onClickToggleMute'\n  };\n\n  VolumeManager.prototype.initialize = function(options) {\n    VolumeManager.__super__.initialize.apply(this, arguments);\n    this.volumeValue = options.initVol;\n    this.isMuted = options.initMute;\n    Mousetrap.bind('m', this.toggleMute);\n    Mousetrap.bind('+', this.volUp);\n    return Mousetrap.bind('-', this.volDown);\n  };\n\n  VolumeManager.prototype.afterRender = function() {\n    var toggledClasses;\n    VolumeManager.__super__.afterRender.apply(this, arguments);\n    this.slidableZone = $(document);\n    this.slider = this.$('.slider');\n    this.sliderContainer = this.$('.slider-container');\n    this.sliderInner = this.$('.slider-inner');\n    if (this.isMuted) {\n      this.sliderInner.width(\"0%\");\n      toggledClasses = 'icon-volume-up icon-volume-off activated';\n      return this.$('#volume-switch-button i').toggleClass(toggledClasses);\n    } else {\n      return this.sliderInner.width(\"\" + this.volumeValue + \"%\");\n    }\n  };\n\n  VolumeManager.prototype.onMouseDownSlider = function(event) {\n    event.preventDefault();\n    this.retrieveVolumeValue(event);\n    this.slidableZone.mousemove(this.onMouseMoveSlider);\n    return this.slidableZone.mouseup(this.onMouseUpSlider);\n  };\n\n  VolumeManager.prototype.onMouseMoveSlider = function(event) {\n    event.preventDefault();\n    return this.retrieveVolumeValue(event);\n  };\n\n  VolumeManager.prototype.onMouseUpSlider = function(event) {\n    event.preventDefault();\n    this.slidableZone.off('mousemove');\n    return this.slidableZone.off('mouseup');\n  };\n\n  VolumeManager.prototype.onClickToggleMute = function(event) {\n    event.preventDefault();\n    return this.toggleMute();\n  };\n\n  VolumeManager.prototype.volUp = function() {\n    this.volumeValue = parseInt(this.volumeValue) + 10;\n    return this.controlVolumeValue();\n  };\n\n  VolumeManager.prototype.volDown = function() {\n    this.volumeValue = parseInt(this.volumeValue) - 10;\n    return this.controlVolumeValue();\n  };\n\n  VolumeManager.prototype.retrieveVolumeValue = function(event) {\n    var handlePositionPercent, handlePositionPx;\n    handlePositionPx = event.clientX - this.sliderContainer.offset().left;\n    handlePositionPercent = handlePositionPx / this.sliderContainer.width() * 100;\n    this.volumeValue = handlePositionPercent.toFixed(0);\n    return this.controlVolumeValue();\n  };\n\n  VolumeManager.prototype.controlVolumeValue = function() {\n    if (this.volumeValue > 100) {\n      this.volumeValue = 100;\n    }\n    if (this.volumeValue < 0) {\n      this.volumeValue = 0;\n      if (!this.isMuted) {\n        this.toggleMute();\n      }\n    }\n    if (this.volumeValue > 0 && this.isMuted) {\n      this.toggleMute();\n    }\n    return this.updateDisplay();\n  };\n\n  VolumeManager.prototype.updateDisplay = function() {\n    var newWidth;\n    Backbone.Mediator.publish('volumeManager:volumeChanged', this.volumeValue);\n    newWidth = this.isMuted ? 0 : this.volumeValue;\n    return this.sliderInner.width(\"\" + newWidth + \"%\");\n  };\n\n  VolumeManager.prototype.toggleMute = function() {\n    var toggledClasses;\n    Backbone.Mediator.publish('volumeManager:toggleMute', this.volumeValue);\n    toggledClasses = 'icon-volume-up icon-volume-off activated';\n    this.$('#volume-switch-button i').toggleClass(toggledClasses);\n    this.isMuted = !this.isMuted;\n    return this.updateDisplay();\n  };\n\n  return VolumeManager;\n\n})(BaseView);\n","var BaseView, PlaylistNavView, PlaylistTrackCollection, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('lib/base_view');\n\nPlaylistTrackCollection = require('collections/playlist');\n\nmodule.exports = PlaylistNavView = (function(_super) {\n  __extends(PlaylistNavView, _super);\n\n  function PlaylistNavView() {\n    this.onSelectClick = __bind(this.onSelectClick, this);\n    _ref = PlaylistNavView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  PlaylistNavView.prototype.className = 'playlist';\n\n  PlaylistNavView.prototype.tagName = 'div';\n\n  PlaylistNavView.prototype.template = require('views/templates/playlist_nav');\n\n  PlaylistNavView.prototype.events = {\n    'click .select-playlist-button': 'onSelectClick',\n    'click .delete-playlist-button': 'onDeleteClick'\n  };\n\n  PlaylistNavView.prototype.initialize = function() {\n    PlaylistNavView.__super__.initialize.apply(this, arguments);\n    return this.listenTo(this.model, 'change:id', this.onIdChange);\n  };\n\n  PlaylistNavView.prototype.onIdChange = function() {\n    return this.$('a').attr('href', \"#playlist/\" + this.model.id);\n  };\n\n  PlaylistNavView.prototype.onSelectClick = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (!this.$('li').hasClass('selected')) {\n      this.$('li').addClass('selected');\n      return this.$el.trigger('playlist-selected', this.model);\n    } else {\n      this.$('li').removeClass('selected');\n      return this.$el.trigger('playlist-unselected');\n    }\n  };\n\n  PlaylistNavView.prototype.onDeleteClick = function(event) {\n    var _this = this;\n    event.preventDefault();\n    event.stopPropagation();\n    if (confirm(\"Are you sure? the playlist will be deleted definitively.\")) {\n      return this.model.destroy({\n        error: function() {\n          return alert(\"Server error occured, track was not deleted.\");\n        }\n      });\n    }\n  };\n\n  return PlaylistNavView;\n\n})(BaseView);\n","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"content\"><div id=\"top-nav\"></div><div id=\"off-screen-nav\"></div><div id=\"tracks-display\"></div><div id=\"player\"></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"off-screen-nav-toggle\"><div class=\"off-screen-nav-toggle-handler\"><div class=\"off-screen-nav-toggle-arrow\"></div></div></div><div class=\"off-screen-nav-content\"><div id=\"playlist-title-list\" class=\"off-screen-nav-title\">Playlists<div title=\"create\" class=\"off-screen-nav-button add-playlist-button\"></div></div><ul id=\"playlist-list\"></ul></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"player-element\"><div id=\"rwd-button\" title=\"play previous track\" class=\"player-button size-26\"><i class=\"icon-backward\"></i></div><div id=\"play-button\" title=\"play/pause\" class=\"player-button size-34\"><i class=\"icon-cogs\"></i></div><div id=\"fwd-button\" title=\"play next track\" class=\"player-button size-26\"><i class=\"icon-forward\"></i></div></div><div class=\"player-element\"><div class=\"progress-side\"><div id=\"loop-button\" title=\"no-repeat/repeat-all/repeat-one\" class=\"progress-side-control\"><i class=\"icon-refresh\"></i></div><div class=\"time left\"><span id=\"elapsedTime\"></span></div></div><div class=\"progress-info\"><div class=\"id3-info\">-</div><div class=\"progress\"><div class=\"inner\"></div></div></div><div class=\"progress-side\"><div id=\"random-button\" title=\"randomize\" class=\"progress-side-control\"><i class=\"icon-random\"></i></div><div class=\"time right\"><span id=\"remainingTime\"></span></div></div></div><div class=\"player-element\"><span id=\"volume\"></span></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"volume-switch-button\" title=\"mute/unmute\"><i class=\"icon-volume-up\"></i></div><div class=\"slider\"><div class=\"slider-container\"><div class=\"slider-inner\"><div class=\"slider-handle\"></div></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"viewport\"><table><thead><tr><th id=\"playlist-play\" title=\"push playlist in the play queue\" class=\"left\"><i class=\"icon-play\"></i></th><th class=\"field title\">Title</th><th class=\"field artist\">Artist</th><th class=\"field album\">Album</th><th class=\"field num\">#</th><th class=\"right\"></th></tr></thead><tbody id=\"track-list\"></tbody></table></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<td id=\"state\" class=\"left\"><div id=\"play-track-button\" title=\"queue this song\" class=\"player-button size-20\"><i class=\"icon-share-alt\"></i></div></td><td class=\"field title\">' + escape((interp = model.title) == null ? '' : interp) + '</td><td class=\"field artist\">' + escape((interp = model.artist) == null ? '' : interp) + '</td><td class=\"field album\">' + escape((interp = model.album) == null ? '' : interp) + '</td><td class=\"field num\">' + escape((interp = model.track) == null ? '' : interp) + '</td><td class=\"right\"><div id=\"delete-button\" title=\"remove\" class=\"player-button size-20 signal-button\"><i class=\"icon-remove\"></i></div></td>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"#playlist/\" + (model.id) + \"\") }, {\"href\":true}));\nbuf.push('><li');\nbuf.push(attrs({ 'title':(\"\" + (model.title) + \"\") }, {\"title\":true}));\nbuf.push('>' + escape((interp = model.title) == null ? '' : interp) + '<div title=\"select playlist : track will be added to this playlist when clicking on the + button\" class=\"off-screen-nav-button select-playlist-button\"></div><div title=\"delete definitively\" class=\"off-screen-nav-button delete-playlist-button\"></div></li></a>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"viewport\"><table><thead><tr><th class=\"left\"><div title=\"save as playlist\" class=\"thead-button save-button\"></div><div title=\"show/hide previously played\" class=\"thead-button show-prev-button\"></div></th><th class=\"field title\">Title</th><th class=\"field artist\">Artist</th><th class=\"field album\">Album</th><th class=\"field num\">#</th><th class=\"right\"><div title=\"clear the queue\" class=\"thead-button clear\"></div></th></tr></thead><tbody id=\"track-list\"></tbody></table></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<td id=\"state\" class=\"left\"><div id=\"mini-play-button\" title=\"play from here\" class=\"player-button size-20\"><i class=\"icon-play\"></i></div></td><td class=\"field title\">' + escape((interp = model.title) == null ? '' : interp) + '</td><td class=\"field artist\">' + escape((interp = model.artist) == null ? '' : interp) + '</td><td class=\"field album\">' + escape((interp = model.album) == null ? '' : interp) + '</td><td class=\"field num\">' + escape((interp = model.track) == null ? '' : interp) + '</td><td class=\"right\"><div id=\"delete-button\" title=\"remove\" class=\"player-button size-20 signal-button\"><i class=\"icon-remove\"></i></div><div id=\"delete-from-here-button\" title=\"clear from here\" class=\"player-button size-20 signal-button\"><i class=\"icon-arrow-down\"></i></div></td>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<a href=\"#\" title=\"go to your songs\"><div id=\"top-nav-title-home\" class=\"top-nav-title\"><span class=\"top-nav-text\">COZIC&nbsp;</span><i class=\"icon-home\"></i></div></a><a href=\"#playqueue\" title=\"go to the play queue\"><div id=\"top-nav-title-list\" class=\"top-nav-title\"><span class=\"top-nav-text\">Up Next&nbsp;</span><i class=\"icon-list\"></i></div></a><div id=\"upload-form\" title=\"click to add tracks\" class=\"top-nav-title\"><span class=\"top-nav-text\">Upload&nbsp;</span><i class=\"icon-cloud-upload\"></i></div><div id=\"youtube-import\" title=\"import sounds from Youtube\" class=\"top-nav-title\"><span class=\"top-nav-text\">Youtube&nbsp;</span><i class=\"icon-youtube\"></i></div><div id=\"broadcast\" title=\"broadcast your cozic\" class=\"top-nav-title\"><span class=\"top-nav-text\">Broadcast&nbsp;</span><i class=\"icon-rss\"></i></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"viewport\"><table><thead><tr><th class=\"left\"></th><th class=\"field title\">Title</th><th class=\"field artist\">Artist</th><th class=\"field album\">Album</th><th class=\"field num\">#</th><th class=\"right\"></th></tr></thead><tbody id=\"track-list\"></tbody></table></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<td id=\"state\" class=\"left\"></td><td class=\"field title\">' + escape((interp = model.title) == null ? '' : interp) + '</td><td class=\"field artist\">' + escape((interp = model.artist) == null ? '' : interp) + '</td><td class=\"field album\">' + escape((interp = model.album) == null ? '' : interp) + '</td><td class=\"field num\">' + escape((interp = model.track) == null ? '' : interp) + '</td><td class=\"right\"><div id=\"delete-button\" title=\"remove\" class=\"player-button size-20 signal-button\"><i class=\"icon-remove\"></i></div></td>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"viewport\"><table><thead><tr><th class=\"left\"></th><th class=\"field title clickable-cell\">Title</th><th title=\"plays counter\" class=\"field plays clickable-cell\">#</th><th class=\"field artist clickable-cell\">Artist</th><th class=\"field album clickable-cell\">Album</th><th title=\"track number\" class=\"field num\">#</th><th class=\"right\"></th></tr></thead><tbody id=\"track-list\"></tbody></table></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<td id=\"state\" class=\"left\"><div id=\"add-to-button\" title=\"add to playlist\" class=\"player-button size-20\"><i class=\"icon-plus\"></i></div><div id=\"play-track-button\" title=\"queue this song\" class=\"player-button size-20\"><i class=\"icon-share-alt\"></i></div></td><td class=\"field title\"><input');\nbuf.push(attrs({ 'type':(\"text\"), 'value':(\"\" + (model.title) + \"\"), 'readonly':(true), \"class\": ('mousetrap') }, {\"type\":true,\"value\":true,\"readonly\":true}));\nbuf.push('/></td><td class=\"field plays\">' + escape((interp = model.plays) == null ? '' : interp) + '</td><td class=\"field artist\"><input');\nbuf.push(attrs({ 'type':(\"text\"), 'value':(\"\" + (model.artist) + \"\"), 'readonly':(true), \"class\": ('mousetrap') }, {\"type\":true,\"value\":true,\"readonly\":true}));\nbuf.push('/></td><td class=\"field album\"><input');\nbuf.push(attrs({ 'type':(\"text\"), 'value':(\"\" + (model.album) + \"\"), 'readonly':(true), \"class\": ('mousetrap') }, {\"type\":true,\"value\":true,\"readonly\":true}));\nbuf.push('/><div id=\"play-album-button\" title=\"queue this album\" class=\"player-button size-20\"><i class=\"icon-share\"></i></div></td><td class=\"field num\">' + escape((interp = model.track) == null ? '' : interp) + '</td><td class=\"right\"><div id=\"delete-button\" title=\"delete definitively\" class=\"player-button size-20 signal-button\"><i class=\"icon-remove\"></i></div></td>');\n}\nreturn buf.join(\"\");\n};","var BaseView, TopNav, app, uploader, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('lib/base_view');\n\napp = require('application');\n\nuploader = require('models/uploader');\n\nmodule.exports = TopNav = (function(_super) {\n  __extends(TopNav, _super);\n\n  function TopNav() {\n    this.onClickYoutube = __bind(this.onClickYoutube, this);\n    this.handleFiles = __bind(this.handleFiles, this);\n    this.onDragOut = __bind(this.onDragOut, this);\n    this.onDragOver = __bind(this.onDragOver, this);\n    this.onFilesDropped = __bind(this.onFilesDropped, this);\n    this.onUploadFormChange = __bind(this.onUploadFormChange, this);\n    this.setupHiddenFileInput = __bind(this.setupHiddenFileInput, this);\n    _ref = TopNav.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  TopNav.prototype.className = 'top-nav';\n\n  TopNav.prototype.tagName = 'div';\n\n  TopNav.prototype.template = require('views/templates/top_nav');\n\n  TopNav.prototype.events = {\n    'click #upload-form': 'onClick',\n    'click #youtube-import': 'onClickYoutube',\n    'click #broadcast': 'onClickBroadcast'\n  };\n\n  TopNav.prototype.subscriptions = {\n    'tracklist:isEmpty': 'onEmptyTrackList'\n  };\n\n  TopNav.prototype.afterRender = function() {\n    return this.setupHiddenFileInput();\n  };\n\n  TopNav.prototype.onEmptyTrackList = function() {\n    return this.$('td#h2').html(\"Drop files here or click to add tracks\");\n  };\n\n  TopNav.prototype.setupHiddenFileInput = function() {\n    if (this.hiddenFileInput) {\n      document.body.removeChild(this.hiddenFileInput);\n    }\n    this.hiddenFileInput = document.createElement(\"input\");\n    this.hiddenFileInput.setAttribute(\"type\", \"file\");\n    this.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\n    this.hiddenFileInput.setAttribute(\"accept\", \"audio/*\");\n    this.hiddenFileInput.style.visibility = \"hidden\";\n    this.hiddenFileInput.style.position = \"absolute\";\n    this.hiddenFileInput.style.top = \"0\";\n    this.hiddenFileInput.style.left = \"0\";\n    this.hiddenFileInput.style.height = \"0\";\n    this.hiddenFileInput.style.width = \"0\";\n    document.body.appendChild(this.hiddenFileInput);\n    return this.hiddenFileInput.addEventListener(\"change\", this.onUploadFormChange);\n  };\n\n  TopNav.prototype.onUploadFormChange = function(event) {\n    this.handleFiles(this.hiddenFileInput.files);\n    return this.setupHiddenFileInput();\n  };\n\n  TopNav.prototype.onClick = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    return this.hiddenFileInput.click();\n  };\n\n  TopNav.prototype.onFilesDropped = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.$el.removeClass('dragover');\n    $('.player').removeClass('dragover');\n    event.dataTransfer = event.originalEvent.dataTransfer;\n    return this.handleFiles(event.dataTransfer.files);\n  };\n\n  TopNav.prototype.onDragOver = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (!this.$el.hasClass('dragover')) {\n      this.$el.addClass('dragover');\n      return $('.player').addClass('dragover');\n    }\n  };\n\n  TopNav.prototype.onDragOut = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.$el.hasClass('dragover')) {\n      this.$el.removeClass('dragover');\n      return $('.player').removeClass('dragover');\n    }\n  };\n\n  TopNav.prototype.handleFiles = function(files) {\n    var curUrl;\n    curUrl = \"\" + document.URL;\n    if (curUrl.match(/playlist/) || curUrl.match(/playqueue/)) {\n      app.router.navigate('', true);\n    }\n    return uploader.process(files);\n  };\n\n  TopNav.prototype.onClickYoutube = function(event) {\n    var curUrl, defaultMsg, defaultVal, input, isValidInput, startIndex, youId;\n    event.preventDefault();\n    event.stopPropagation();\n    defaultMsg = \"Please enter a youtube url :\";\n    defaultVal = \"http://www.youtube.com/watch?v=KMU0tzLwhbE\";\n    isValidInput = false;\n    while (!isValidInput) {\n      input = prompt(defaultMsg, defaultVal);\n      if (input == null) {\n        return;\n      }\n      if (input.match(/^https/)) {\n        input = input.replace(/^https:\\/\\//i, 'http://');\n      }\n      if (input.match(/^http:\\/\\/www.youtube.com\\/watch?/)) {\n        startIndex = input.search(/v=/) + 2;\n        isValidInput = true;\n        youId = input.substr(startIndex, 11);\n      } else if (input.match(/^http:\\/\\/youtu.be\\//)) {\n        isValidInput = true;\n        youId = input.substr(16, 11);\n      } else if (input.length === 11) {\n        isValidInput = true;\n        youId = input;\n      }\n      defaultMsg = \"Invalid youtube url, please try again :\";\n      defaultVal = input;\n    }\n    curUrl = \"\" + document.URL;\n    if (curUrl.match(/playlist/) || curUrl.match(/playqueue/)) {\n      app.router.navigate('', true);\n    }\n    return uploader.processYoutube(youId);\n  };\n\n  TopNav.prototype.onClickBroadcast = function(event) {\n    var url;\n    event.preventDefault();\n    event.stopPropagation();\n    this.$('#broadcast').toggleClass('activated');\n    if (this.$('#broadcast').hasClass('activated')) {\n      url = document.URL;\n      alert(\"Your friends can now listen your current mix at\\n\" + (url.replace(/\\/#?apps\\/cozic\\/.*$/, '')) + \"/public/cozic/\");\n      app.isBroadcastEnabled = true;\n      return $.ajax(\"broadcast\", {\n        type: 'GET',\n        error: function(jqXHR, textStatus, errorThrown) {\n          return console.log(\"ajax fail : \" + textStatus);\n        }\n      });\n    } else {\n      app.isBroadcastEnabled = false;\n      return $.ajax(\"broadcast\", {\n        type: 'DELETE',\n        error: function(jqXHR, textStatus, errorThrown) {\n          return console.log(\"ajax fail : \" + textStatus);\n        }\n      });\n    }\n  };\n\n  return TopNav;\n\n})(BaseView);\n"]}